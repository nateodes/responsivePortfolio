if (self.CavalryLogger) { CavalryLogger.start_js(["MD0mM"]); }

__d("BasicTypeaheadLoggerJSConstants",[],(function a(b,c,d,e,f,g){f.exports={EventNames:{ADS_TARGETING:"ads_targeting",MENTIONS:"mentions",TINDER_MENTIONS:"tinder_mentions",REACT_COMPOSER_MENTIONS:"react_composer_mentions",PHOTO_TAGGER:"photo-tagger",PROFILE:"profile",TIMELINE_COLLECTION:"timeline_collection",OGCOMPOSER_TAGGER:"ogcomposer-tagger",PLACES_TYPEAHEAD:"places_typeahead",CHAT_MENTIONS_ENTITIES:"chat_mentions_entities",REACT_COMPOSER_OG_TAGGER:"react_composer_og_tagger",REACT_SHARE_DIALOG_OG_TAGGER:"react_share_dialog_og_tagger",REACT_COMPOSER_LOCATION_TAGGER:"react_composer_location_tagger",REACT_SHARE_DIALOG_LOCATION_TAGGER:"react_share_dialog_location_tagger",GROUP_SEARCH_TA:"group_search_ta"},Fields:{EVENT:"event",STRATEGY_NAME:"strategy_name",HAS_INTENT_MENTION:"has_intent_mention",USER_ID:"userid",SELECTED_POSITION:"selected_position",SELECTED_ID:"selected_id",QUERIES_HISTORY:"queries_history",NUM_QUERIES:"num_queries",CANDIDATE_RESULTS:"candidate_results",CANDIDATE_RESULTS_ADS:"candidate_results_ads",QUERY:"query",LAST_NOT_BACKSPACED_QUERY:"last_not_backspaced_query",REQUEST_ID:"request_id",REQUEST_IDS_HISTORY:"request_ids_history",SESSION_ID:"session_id",SESSION_TIME:"session_time",NORMALIZED_BACKEND_QUERY:"normalized_backend_query",SELECTED_TYPE:"selected_type",SELECTED_QUERY:"selected_query",SELECTED_ORIGINAL_ID:"selected_original_id",SELECTED_SCORE:"selected_score",PLACE_ID:"place_id",CLIENT_TIME:"client_time",TIMEZONE:"timezone",TIMEZONE_ID:"timezone_id",ACTION_TYPE_ID:"action_type_id",SELECTED_ID_INT:"selected_id_int",CLICK:"click",FILTERED_CANDIDATE_RESULTS:"filtered_candidate_results",FBTYPE:"fbtype",PAGE:"page",PAGE_VISIBILITY_DUMMY:"page_visibility_dummy",SEARCH_VERSION:"search_version",GK_STATUS:"gk_status",QE_GROUP:"qe_group",EVENT_SPECIFIC_DATA:"event_specific_data",REF:"ref",SOURCE:"source",GEO_PROFILE_COUNTRY:"geo_profile_country",CURRENT_GEO_PROFILE:"current_geo_profile",CURRENT_CITY_GLOBAL_ID:"current_city_global_id",CURRENT_REGION_ID:"current_region_id",CURRENT_COUNTRY:"current_country",COLLECTION_DATA:"collection_data",FILTERED_COUNT:"filtered_count",GOOD_CLICK:"good_click",GOOD_CLICK_INT:"good_click_int",FALLBACK_CLICK:"fallback_click",ENTITY_CLICK:"entity_click",ENTITY_CLICK_INT:"entity_click_int",HAD_RESULTS:"had_results",NUM_RESULTS:"num_results",PAGE_CATEGORY:"page_category",PAGE_VISIBILITY:"page_visibility",PAGE_IS_AUTHENTIC:"page_is_authentic",PRECISION:"precision",EVENT_CONTEXT:"event_context",PAGE_SOURCE:"page_source",ENTITY_TYPE:"entity_type",EVENT_VALID:"event_valid",QUERY_LENGTH:"query_length",FIRST_RESULT:"first_result",HAD_DUPLICATES:"had_duplicates",COMPLETE_APP_COUNT:"complete_app_count",APP_COLLECTION_SIZE:"app_collection_size",COLLECTION_SIZE:"collection_size",NON_EMPTY_FRIENDS_COUNT:"non_empty_friends_count",CAROUSEL_COLLECTION_SIZE:"carousel_collection_size",QUALITY_ACCURACY:"quality_accuracy",SELECTED_WITH_MOUSE:"selected_with_mouse",AVG_QUERY_LATENCY:"avg_query_latency",IS_EMPLOYEE:"is_employee",PROFILE_SECTION:"profile_section",TYPEAHEAD_SOURCE:"typeahead_source",MINUTIAE_COMPOSER_VERSION:"minutiae_composer_version",LAST_QUERY_LATENCY:"last_query_latency",AD_ACCOUNT_ID:"ad_account_id",SUGGESTION_MODE:"suggestion_mode",NEXT_SUGGESTION_MODE:"next_suggestion_mode"},MinutiaeComposerVersions:{LEGACY:"legacy",LEGACY_TOKENIZED:"legacy_tokenized",REACT:"react"}};}),null);
__d("PlaceSearchConstants",[],(function a(b,c,d,e,f,g){f.exports={SOURCE_INTERN:"intern",SOURCE_W_COMPOSER:"web_composer",SOURCE_W_COMPOSER_MEDIA:"web_composer_media",SOURCE_ALBUM_CREATION:"album_creation",SOURCE_ALBUM_EDIT:"album_edit",SOURCE_PHOTO_EDIT:"photo_edit",SOURCE_ALBUM_ADD_PHOTOS:"album_add_photos",SOURCE_PLAN_EDIT:"plan_edit",SOURCE_GROUP_EDIT:"group_edit",SOURCE_DISSIMILARITY:"dissimilarity",SOURCE_TEST:"test",SOURCE_FQL:"fql",SOURCE_EVENTS:"events_create",SOURCE_PAGES:"pages_create",SOURCE_TOUCH:"touch",SOURCE_M:"m",SOURCE_M_PLAN:"m_plan",SOURCE_M_NO_GPS:"m_no_gps",SOURCE_PROFILE_MAP:"profile_map",SOURCE_WEB_DASH:"web_dashboard",SOURCE_MOBILE_DASH:"mobile_dashboard",SOURCE_UNKNOWN:"unknown",SOURCE_PHOTO_EDIT_EXIF:"photo_edit_exif",SOURCE_TIMELINE_LOCATION_EDIT:"timeline_location_edit",SOURCE_NETEGO_TAGGING:"netego_tagging",SOURCE_PPS_NETEGO:"netego_pps",SOURCE_PPS_SNOWLIFT:"snowlift_pps",SOURCE_PROXIMITY_GUESSER:"proximity_guesser",SOURCE_SEARCH_RESULTS_PAGE:"detailedsearch",SOURCE_PLACES_EDITOR:"places_editor",SOURCE_MAP_COMPOSER:"map_composer",SOURCE_W_MARKETPLACE_SEARCH:"web_marketplace_search",SOURCE_NEARBY:"nearby",SOURCE_SEARCH_MAP:"searchmap",SOURCE_TIMELINE_COMPOSER:"timeline_composer",SOURCE_M_EDIT_PROFILE:"m_edit_profile",SOURCE_M_EDIT_PAGE_INFO:"m_edit_page_info",SOURCE_PYML_NEARBY:"pyml_nearby",SOURCE_MOBILE_PLACE_COMPOSER:"mobile_place_composer",SOURCE_NEARBY_CHAT_ROOM:"nearby_chat_room",SOURCE_GRAPHQL:"graphql",SOURCE_CURRENT_PLACE:"current_place",SOURCE_AURA_PUSH_NOTIF:"aura_push_notif",SOURCE_SUGGESTIFIER:"suggestifier",SOURCE_PLACE_ADDRESS_LOCATED_IN:"place_address_located_in",SOURCE_IG_MEDIA_TAGGING:"instagram.media_tagging.place_search",SOURCE_MOBILE_STATUS:"mobile_status",SOURCE_MOBILE_CHECKIN:"mobile_checkin",SOURCE_MOBILE_PHOTO:"mobile_photo",SOURCE_CAMERA_MEDIA_EFFECT_UPLOAD:"camera_media_effect_upload",SOURCE_GEO_ADMIN_AREA_MATCHER:"geo_admin_area_matcher",SOURCE_INSTANT_WORKFLOWS:"instant_workflows",SOURCE_JOB_SEARCH:"job_search",SOURCE_INSPIRATIONS:"inspirations",SOURCE_IG_PLACE_TAGGING:"instagram.place_tagging",PREDICTIONS_APPID:106712229428223};}),null);
__d("ReactComposerTypeaheadSearchSourceConfig",[],(function a(b,c,d,e,f,g){f.exports={ACTIVITY:{action:{auxiliaryFields:{default_icon:"default_icon",icon:"icon",original_id:"original_id",prompt:"prompt"}},object:{auxiliaryFields:{icon:"icon",icon_src:"icon_src",original_id:"original_id",verified:"is_verified"}}},LOCATION:{include_likes:false,include_subtext:true,include_address:1,exact_match:false,map_height:null,map_width:null,use_unicorn:true,allow_places:true,allow_cities:true,render_map:false,limit:15,use_searchable_entries:true}};}),null);
__d("ReactComposerTypeaheadSearchSourceType",[],(function a(b,c,d,e,f,g){f.exports={ACTIVITY:"ACTIVITY",LOCATION:"LOCATION"};}),null);
__d("TopicFeedsConstant",[],(function a(b,c,d,e,f,g){var h={DEFAULT_PHOTO_AUTO_TAGGING_DELAY:3000,DEFAULT_PHOTO_POLLING_DURATION:10000,DEFAULT_PHOTO_POLLING_INTERVAL:1000,DEFAULT_TEXT_AUTO_TAGGING_DELAY:3000,DEFAULT_COMPOSER_TOPIC_LIMIT:3,TOPIC_CONFIDENCE_USER_ADD:3,TOPIC_CONFIDENCE_USER_REMOVE:-1,TOPIC_CONFIDENCE_BOOTSTRAP:2};f.exports=h;}),null);
__d('TopicFeedsComposerTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:TopicFeedsComposerLoggerConfig',this.$TopicFeedsComposerTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:TopicFeedsComposerLoggerConfig',this.$TopicFeedsComposerTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$TopicFeedsComposerTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$TopicFeedsComposerTypedLogger1=babelHelpers['extends']({},this.$TopicFeedsComposerTypedLogger1,j);return this;};h.prototype.setClassifySessionID=function(j){this.$TopicFeedsComposerTypedLogger1.classify_session_id=j;return this;};h.prototype.setClientEventTimeMs=function(j){this.$TopicFeedsComposerTypedLogger1.client_event_time_ms=j;return this;};h.prototype.setComposerFeedID=function(j){this.$TopicFeedsComposerTypedLogger1.composer_feed_id=j;return this;};h.prototype.setComposerID=function(j){this.$TopicFeedsComposerTypedLogger1.composer_id=j;return this;};h.prototype.setEntryPointRef=function(j){this.$TopicFeedsComposerTypedLogger1.entry_point_ref=j;return this;};h.prototype.setEvent=function(j){this.$TopicFeedsComposerTypedLogger1.event=j;return this;};h.prototype.setIsPredictionApplied=function(j){this.$TopicFeedsComposerTypedLogger1.is_prediction_applied=j;return this;};h.prototype.setLinkAttachmentCount=function(j){this.$TopicFeedsComposerTypedLogger1.link_attachment_count=j;return this;};h.prototype.setPhotoAttachmentCount=function(j){this.$TopicFeedsComposerTypedLogger1.photo_attachment_count=j;return this;};h.prototype.setPhotoUploadToPostDuration=function(j){this.$TopicFeedsComposerTypedLogger1.photo_upload_to_post_duration=j;return this;};h.prototype.setPredictionCount=function(j){this.$TopicFeedsComposerTypedLogger1.prediction_count=j;return this;};h.prototype.setPredictionDuration=function(j){this.$TopicFeedsComposerTypedLogger1.prediction_duration=j;return this;};h.prototype.setPredictionErrorReason=function(j){this.$TopicFeedsComposerTypedLogger1.prediction_error_reason=j;return this;};h.prototype.setPredictionIsSuccessful=function(j){this.$TopicFeedsComposerTypedLogger1.prediction_is_successful=j;return this;};h.prototype.setSequenceNumber=function(j){this.$TopicFeedsComposerTypedLogger1.sequence_number=j;return this;};h.prototype.setTargetType=function(j){this.$TopicFeedsComposerTypedLogger1.target_type=j;return this;};h.prototype.setTopicAdded=function(j){this.$TopicFeedsComposerTypedLogger1.topic_added=j;return this;};h.prototype.setTopicRemoved=function(j){this.$TopicFeedsComposerTypedLogger1.topic_removed=j;return this;};h.prototype.setTopicsAutoTagged=function(j){this.$TopicFeedsComposerTypedLogger1.topics_auto_tagged=c('GeneratedLoggerUtils').serializeVector(j);return this;};h.prototype.setTopicsTagged=function(j){this.$TopicFeedsComposerTypedLogger1.topics_tagged=c('GeneratedLoggerUtils').serializeVector(j);return this;};h.prototype.setTopicsUserAdded=function(j){this.$TopicFeedsComposerTypedLogger1.topics_user_added=c('GeneratedLoggerUtils').serializeVector(j);return this;};h.prototype.setTopicsUserRemoved=function(j){this.$TopicFeedsComposerTypedLogger1.topics_user_removed=c('GeneratedLoggerUtils').serializeVector(j);return this;};h.prototype.setVC=function(j){this.$TopicFeedsComposerTypedLogger1.vc=j;return this;};var i={classify_session_id:true,client_event_time_ms:true,composer_feed_id:true,composer_id:true,entry_point_ref:true,event:true,is_prediction_applied:true,link_attachment_count:true,photo_attachment_count:true,photo_upload_to_post_duration:true,prediction_count:true,prediction_duration:true,prediction_error_reason:true,prediction_is_successful:true,sequence_number:true,target_type:true,topic_added:true,topic_removed:true,topics_auto_tagged:true,topics_tagged:true,topics_user_added:true,topics_user_removed:true,vc:true};f.exports=h;}),null);
__d('TimelineMapScrollableArea',['Animation','ArbiterMixin','CSS','DOM','Event','Run','Scroll','SimpleDrag','Style','Vector','$','shield'],(function a(b,c,d,e,f,g){function h(i,j){i&&this.init(c('$')(i),j);}Object.assign(h.prototype,c('ArbiterMixin'),{init:function i(j,k){k=k||{};this._elem=j;this._wrap=c('DOM').find(j,'div.fbScrollableAreaWrap');this._body=c('DOM').find(this._wrap,'div.fbScrollableAreaBody');this._track=c('DOM').find(j,'div.fbScrollableAreaTrack');this._gripper=c('DOM').find(this._track,'div.fbScrollableAreaGripper');this._options=k;this.adjustGripper();this._listeners=[c('Event').listen(this._wrap,'scroll',this._handleScroll.bind(this))];if(k.fade!==false)this._listeners.push(c('Event').listen(j,'mouseenter',c('shield')(this.adjustGripper,this)),c('Event').listen(j,'mouseenter',c('shield')(this.showScrollbar,this)),c('Event').listen(j,'mousemove',this._handleMousemove.bind(this)),c('Event').listen(j,'mouseout',c('shield')(this.hideScrollbar,this)));if(k.fade!==undefined)this._listeners.push(c('Event').listen(this._track,'click',this.clickToScroll.bind(this)));if(k.verticalscroll)this._listeners.push(c('Event').listen(this._wrap,'mousewheel',this.mouseWheel.bind(this)),c('Event').listen(this._wrap,'DOMMouseScroll',this.mouseWheel.bind(this)));this.initDrag();if(!k.persistent)c('Run').onLeave(this.destroy.bind(this));},getRoot:function i(){return this._elem;},initDrag:function i(){var j=new (c('SimpleDrag'))(this._gripper);j.subscribe('start',function(k,event){if(!(event.which&&event.which===1||event.button&&event.button===1))return;this.inform('dragstart');var l=c('Vector').getEventPosition(event).x,m=this._gripper.offsetLeft,n=j.subscribe('update',function(p,q){var r=c('Vector').getEventPosition(q).x-l,s=this._elem.clientWidth,t=this._body.offsetWidth,u=this._track.offsetWidth,v=s/t*u,w=t-this._wrap.offsetWidth,x=m+r,y=u-v;x=Math.max(Math.min(x,y),0);var z=x/y*w;c('Scroll').setLeft(this._wrap,z);}.bind(this)),o=j.subscribe('end',function(){j.unsubscribe(n);j.unsubscribe(o);this.inform('dragend');}.bind(this));}.bind(this));},adjustGripper:function i(){var j=this._elem.clientWidth,k=this._body.offsetWidth,l=this._track.offsetWidth,m=j/k*l;if(m<l){c('Style').set(this._gripper,'width',m+'px');var n=c('Scroll').getLeft(this._wrap)/k*l;c('Style').set(this._gripper,'left',n+'px');c('CSS').show(this._gripper);}else c('CSS').hide(this._gripper);this._checkContentBoundaries();return this;},_checkContentBoundaries:function i(){var j=c('Scroll').getLeft(this._wrap),k=this._wrap.scrollWidth-this._wrap.clientWidth;c('CSS').conditionClass(this._elem,'contentBefore',j>0);c('CSS').conditionClass(this._elem,'contentAfter',j<k);},destroy:function i(){this._listeners.forEach(function(j){j.remove();});this._listeners.length=0;},_handleMousemove:function i(event){var j=c('Vector').getElementPosition(this._track).y,k=c('Vector').getElementDimensions(this._track).y;if(Math.abs(j+k/2-c('Vector').getEventPosition(event).y)<25){this.showScrollbar(false);}else this.hideScrollbar();},_handleScroll:function i(event){this.adjustGripper();if(this._options.fade!==false)this.showScrollbar();},hideScrollbar:function i(){if(!this._scrollbarVisible)return this;this._scrollbarVisible=false;if(this._hideTimeout){clearTimeout(this._hideTimeout);this._hideTimeout=null;}this._hideTimeout=setTimeout(function(){if(this._scrollbarAnimation){this._scrollbarAnimation.stop();this._scrollbarAnimation=null;}this._scrollbarAnimation=new (c('Animation'))(this._track).from('opacity',1).to('opacity',0).duration(250).ondone(c('CSS').addClass.bind(null,this._track,'invisible_elem')).go();}.bind(this),750);return this;},showScrollbar:function i(j){if(this._scrollbarVisible)return this;this._scrollbarVisible=true;if(this._hideTimeout){clearTimeout(this._hideTimeout);this._hideTimeout=null;}if(this._scrollbarAnimation){this._scrollbarAnimation.stop();this._scrollbarAnimation=null;}this.adjustGripper();c('Style').set(this._track,'opacity',1);c('CSS').removeClass(this._track,'invisible_elem');if(j!==false)this.hideScrollbar();return this;},clickToScroll:function i(event){var j=c('Vector').getEventPosition(event).x,k=this._elem.clientWidth,l=this._body.offsetWidth,m=this._track.offsetWidth,n=k/l*m,o=c('Vector').getElementPosition(this._gripper);if(j>=o.x&&j<=o.x+n)return;var p=j<o.x?-1:1,q=this._wrap.offsetWidth*.8*p;this.scrollBy(q);},scrollBy:function i(j){this.setScroll(c('Scroll').getLeft(this._wrap)+j);},getMaxBodyOffset:function i(){return this._body.offsetWidth-this._wrap.offsetWidth;},setScroll:function i(j){var k=j;k=Math.max(Math.min(k,this.getMaxBodyOffset()),0);c('Scroll').setLeft(this._wrap,k);},scrollIntoView:function i(j){var k=this._wrap.clientWidth,l=j.offsetWidth,m=c('Scroll').getLeft(this._wrap),n=m+k,o=j.offsetLeft,p=o+l;if(o<m||k<l){this.setScroll(o);}else if(p>n)this.setScroll(m+(p-n));},mouseWheel:function i(event){if(this.getMaxBodyOffset()<=0)return;var j=0;if(event.wheelDelta){var k=event.wheelDelta;if(event.wheelDeltaX&&event.wheelDeltaY)k=Math.abs(event.wheelDeltaX)>Math.abs(event.wheelDeltaY)?event.wheelDeltaX:event.wheelDeltaY;j=-k*10/40;}else if(event.detail)j=event.detail*10;this.scrollBy(j);event.prevent();}});f.exports=b.TimelineMapScrollableArea||h;}),null);
__d('ReactComposerAudienceActions',['ReactComposerAudienceActionTypes','ReactComposerDispatcher','ReactComposerAudienceStore'],(function a(b,c,d,e,f,g){c('ReactComposerAudienceStore');var h={setAudience:function i(j,k,l,m){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerAudienceActionTypes').SET_AUDIENCE,audience:k,legacyAudience:l,sourceLoggingName:m});},setAudienceWithoutLogging:function i(j,k,l){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerAudienceActionTypes').SET_AUDIENCE,audience:k,legacyAudience:l,suppressWaterfallLogging:true});},setAudienceElement:function i(j,k){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerAudienceActionTypes').SET_AUDIENCE_ELEMENT,audienceElement:k});},setAudienceInstance:function i(j,k){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerAudienceActionTypes').SET_AUDIENCE_INSTANCE,audienceInstance:k});},setPrivacyxNullDangerous:function i(j,k){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerAudienceActionTypes').SET_PRIVACYX_NULL_DANGEROUS,privacyxNullDangerous:k});},setCollectionID:function i(j,k,l){c('ReactComposerDispatcher').dispatch({composerID:j,sourceLoggingName:k,type:c('ReactComposerAudienceActionTypes').SET_COLLECTION,collectionID:l});},setCollectionIDWithoutLogging:function i(j,k){c('ReactComposerDispatcher').dispatch({composerID:j,suppressWaterfallLogging:true,type:c('ReactComposerAudienceActionTypes').SET_COLLECTION,collectionID:k});}};f.exports=h;}),null);
__d('ReactComposerAudienceSelector.react',['cx','DOM','PrivacySelector','ReactComponentWithPureRenderMixin','React','ReactDOM','joinClasses'],(function a(b,c,d,e,f,g,h){var i=c('React').PropTypes,j=1.5,k=20,l=500,m=c('React').createClass({displayName:'ReactComposerAudienceSelector',_timeout:k,_adamaHackTimeout:null,_layerHackTimeout:null,mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{audienceXHP:i.instanceOf(HTMLElement).isRequired,onChange:i.func.isRequired,viewerIsTarget:i.bool.isRequired,className:i.string},getInitialState:function n(){return {loading:true};},componentDidMount:function n(){if(this.props.viewerIsTarget)this._scheduleAdamaHack();if(this.refs&&this.refs.audienceSelector){c('DOM').setContent(c('ReactDOM').findDOMNode(this.refs.audienceSelector),this.props.audienceXHP);}else this._layerHack();},componentWillUnmount:function n(){this._adamaHackTimeout&&clearTimeout(this._adamaHackTimeout);this._layerHackTimeout&&clearTimeout(this._layerHackTimeout);},render:function n(){return c('React').createElement('div',{ref:'audienceSelector',className:c('joinClasses')("_5dd8"+(this.state.loading?' '+"_2hio":''),this.props.className)});},_onChange:function n(o,p){if(this.isMounted())this.props.onChange(p);},_layerHack:function n(){this._layerHackTimeout=setTimeout(function(){if(this.refs&&this.refs.audienceSelector){c('DOM').setContent(c('ReactDOM').findDOMNode(this.refs.audienceSelector),this.props.audienceXHP);}else this._layerHack();}.bind(this),100);},_scheduleAdamaHack:function n(){this._adamaHackTimeout=setTimeout(function(){var o=c('PrivacySelector').getAdamaSelectorInstance(this.props.audienceXHP);if(o){o.subscribe('changed',this._onChange);this.setState({loading:false});}else{this._timeout=Math.min(this._timeout*j,l);this._scheduleAdamaHack();}}.bind(this),this._timeout);}});f.exports=m;}),null);
__d('ReactComposerAudienceSelectorContainer.react',['csx','cx','invariant','Arbiter','ReactComposerAudienceActions','ReactComposerAudienceSelector.react','ReactComposerAudienceStore','ReactComposerLoggingName','ReactComposerPropsAndStoreBasedStateMixin','ReactComposerStatusStore','ReactComposerTaggerStore','ReactComposerTaggerType','CSS','DOM','BackgroundImage.react','DataStore','PrivacySelector','ReactComponentWithPureRenderMixin','React','XUIPopoverButton.react','ifRequired'],(function a(b,c,d,e,f,g,h,i,j){var k=c('React').PropTypes,l=c('React').createClass({displayName:'ReactComposerAudienceSelectorContainer',mixins:[c('ReactComponentWithPureRenderMixin'),c('ReactComposerPropsAndStoreBasedStateMixin')(c('ReactComposerAudienceStore'),c('ReactComposerStatusStore'),c('ReactComposerTaggerStore'))],propTypes:{audienceXHP:k.instanceOf(HTMLElement).isRequired,viewerIsTarget:k.bool.isRequired,className:k.string},statics:{beforeCalculateInitialState:function m(n,o,p){var q=o.audienceXHP,r,s=c('PrivacySelector').getAdamaSelectorInstance(q);c('ReactComposerAudienceActions').setAudienceElement(n,o.audienceXHP);c('ReactComposerAudienceActions').setAudienceInstance(n,s);if(!q||!o.viewerIsTarget)return;if(s)r=s.getPostParam();var t;if(!s)t=c('DOM').scry(q,'select option[selected="1"]').pop();if(!s&&!t){var u=c('DOM').scry(q,'input[name="privacyx"]')[0];if(u)r=u.value;}!!(r||t)||c('PrivacySelector').isFakeOrUneditableSelector(q)||p.actorID||j(0);c('ReactComposerAudienceActions').setAudienceWithoutLogging(n,r,t?t.value:null);},calculateState:function m(n,o){var p=c('ReactComposerAudienceStore').getCollectionID(n);if(p){var q=c('ifRequired')('ReactComposerCollectionsStore',function(x){return x.getCollectionByID(n,p);});if(q!==null)return {collectionPrivacyIcon:q.privacyIcon,collectionPrivacyLabel:q.privacyLabel};}var r=c('ReactComposerStatusStore').getMentions(n),s=c('ReactComposerTaggerStore').getTaggerData(n,c('ReactComposerTaggerType').PEOPLE)||[],t=s.map(function(x){return {info:{type:x.getType(),uid:x.getUniqueID(),text:x.getTitle()}};}),u=c('CSS').matchesSelector(o.audienceXHP,"._43_1")?o.audienceXHP:c('DOM').scry(o.audienceXHP,"._43_1")[0],v=u?c('DataStore').get(u,'selector'):null,w={withTags:t,mention:r};if(v&&v.informTagsChanged){v.informTagsChanged(w);}else c('Arbiter').inform('Composer/changedtags',w);return {collectionPrivacyIcon:null,collectionPrivacyLabel:null};}},render:function m(){if(this.state.collectionPrivacyIcon&&this.state.collectionPrivacyLabel){return c('React').createElement(c('XUIPopoverButton.react'),{className:"_5dd8",disabled:true,image:c('React').createElement(c('BackgroundImage.react'),{backgroundPosition:'100% 50%',className:"_3byx",height:12,src:this.state.collectionPrivacyIcon,width:12}),label:this.state.collectionPrivacyLabel});}else return c('React').createElement(c('ReactComposerAudienceSelector.react'),babelHelpers['extends']({},this.props,{onChange:this._onAudienceChanged}));},_onAudienceChanged:function m(n){c('ReactComposerAudienceActions').setAudience(this.context.composerID,n.post_param,n.privacy_base,c('ReactComposerLoggingName').AUDIENCE_SELECTOR);}});f.exports=l;}),null);
__d('ReactComposerMediaAttachmentActionType',['keyMirrorRecursive'],(function a(b,c,d,e,f,g){f.exports=c('keyMirrorRecursive')({SET_MEDIA_CONFIG:null},'ReactComposerMediaAttachmentActionType');}),null);
__d('ReactComposerMediaAttachmentStore',['ReactComposerMediaAttachmentActionType','ReactComposerStoreBase'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('ReactComposerStoreBase'));i=h&&h.prototype;function j(){'use strict';var k;i.constructor.call(this,function(){return {createAlbumLink:null,taggingDataSource:null,videoUploader:null,videoProgressBar:null,videoProgressBarInstance:null};},function(l){switch(l.type){case c('ReactComposerMediaAttachmentActionType').SET_MEDIA_CONFIG:k&&k.$ReactComposerMediaAttachmentStore1(l);break;}});k=this;}j.prototype.getCreateAlbumLink=function(k){'use strict';return this.getComposerData(k).createAlbumLink;};j.prototype.getTaggingDataSource=function(k){'use strict';return this.getComposerData(k).taggingDataSource;};j.prototype.getVideoUploader=function(k){'use strict';return this.getComposerData(k).videoUploader;};j.prototype.getVideoProgressBarInstance=function(k){'use strict';return this.getComposerData(k).videoProgressBarInstance;};j.prototype.getVideoProgressBar=function(k){'use strict';return this.getComposerData(k).videoProgressBar;};j.prototype.$ReactComposerMediaAttachmentStore1=function(k){'use strict';var l=this.getComposerData(k.composerID);l.createAlbumLink=k.config.createAlbumLink;l.taggingDataSource=k.config.taggingDataSource;l.videoUploader=k.config.videoUploader;l.videoProgressBar=k.config.videoProgressBar;l.videoProgressBarInstance=k.config.videoProgressBarInstance;this.emitChange(k.composerID);};f.exports=new j();}),null);
__d('ReactComposerMediaAttachmentActions',['ReactComposerMediaAttachmentActionType','ReactComposerDispatcher','ReactComposerMediaAttachmentStore'],(function a(b,c,d,e,f,g){c('ReactComposerMediaAttachmentStore');h.prototype.setConfig=function(i,j){'use strict';var k={composerID:i,type:c('ReactComposerMediaAttachmentActionType').SET_MEDIA_CONFIG,config:j};c('ReactComposerDispatcher').dispatch(k);};h.prototype.createAlbumSelectorClicked=function(i){'use strict';c('ReactComposerDispatcher').dispatch({composerID:i,type:c('ReactComposerMediaAttachmentActionType').CREATE_ALBUM_SELECTOR_CLICKED});};function h(){'use strict';}f.exports=new h();}),null);
__d('ReactComposerStatusActions',['ReactComposerStatusActionType','ReactComposerDispatcher','ReactComposerStatusStore'],(function a(b,c,d,e,f,g){c('ReactComposerStatusStore');h.prototype.setMentionsSource=function(i,j){'use strict';var k={composerID:i,type:c('ReactComposerStatusActionType').SET_MENTIONS_SOURCE,mentionsSource:j};c('ReactComposerDispatcher').dispatch(k);};h.prototype.setTypeaheadReporter=function(i,j){'use strict';var k={composerID:i,type:c('ReactComposerStatusActionType').SET_TYPEAHEAD_REPORTER,typeaheadReporter:j};c('ReactComposerDispatcher').dispatch(k);};h.prototype.setEditorState=function(i,j){'use strict';var k={composerID:i,type:c('ReactComposerStatusActionType').SET_EDITOR_STATE,editorState:j};c('ReactComposerDispatcher').dispatch(k);};h.prototype.setOriginalEditorState=function(i,j){'use strict';var k={composerID:i,type:c('ReactComposerStatusActionType').SET_ORIGINAL_EDITOR_STATE,originalEditorState:j};c('ReactComposerDispatcher').dispatch(k);};h.prototype.setMentions=function(i,j){'use strict';var k={composerID:i,type:c('ReactComposerStatusActionType').SET_MENTIONS,mentions:j};c('ReactComposerDispatcher').dispatch(k);};h.prototype.setTextLength=function(i,j){'use strict';c('ReactComposerDispatcher').dispatch({composerID:i,type:c('ReactComposerStatusActionType').SET_TEXT_LENGTH,textLength:j});};function h(){'use strict';}f.exports=new h();}),null);
__d('ReactComposerTaggerButtons.react',['cx','React'],(function a(b,c,d,e,f,g,h){var i,j;i=babelHelpers.inherits(k,c('React').PureComponent);j=i&&i.prototype;k.prototype.render=function(){'use strict';return c('React').createElement('div',{className:"_47gt"},this.props.children);};function k(){'use strict';i.apply(this,arguments);}f.exports=k;}),null);
__d('ShareDialogTagSummary.react',['cx','Arbiter','AsyncRequest','immutable','Parent','React','emptyFunction','ifRequired','joinClasses'],(function a(b,c,d,e,f,g,h){var i,j,k=c('React').PropTypes,l=true;i=babelHelpers.inherits(m,c('React').PureComponent);j=i&&i.prototype;function m(){var n,o;'use strict';for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.state={socialText:null},this.$ShareDialogTagSummary1=undefined,this.$ShareDialogTagSummary2=undefined,this.$ShareDialogTagSummary4=function(s){this.setState({socialText:s.getPayload().rendered});}.bind(this),this.$ShareDialogTagSummary5=function(s){var t=s.target;if(c('Parent').byClass(t,'withToken')){this.props.withTokenClick();}else if(c('Parent').byClass(t,'placeToken')){this.props.placeTokenClick();}else if(c('Parent').byClass(t,'og_composer_object')){this.props.ogObjectClick();}else if(!c('Parent').byClass(t,'ogPickerIcon'))this.props.onTagSummaryClick();}.bind(this),o;}m.prototype.componentWillMount=function(){'use strict';this.$ShareDialogTagSummary1=c('Arbiter').subscribe('composer/ogIconPickerOpened',function(event,n){l=false;});this.$ShareDialogTagSummary3(this.props);};m.prototype.componentWillUnmount=function(){'use strict';if(this.$ShareDialogTagSummary2)this.$ShareDialogTagSummary2.abort();};m.prototype.componentWillReceiveProps=function(n){'use strict';if(!this.props.taggerData.equals(n.taggerData))this.$ShareDialogTagSummary3(n);};m.prototype.render=function(){'use strict';var n=c('joinClasses')(this.props.className,"_4zq4");return c('React').createElement('div',{className:n,onMouseDown:this.$ShareDialogTagSummary5,dangerouslySetInnerHTML:this.state.socialText});};m.prototype.$ShareDialogTagSummary3=function(n){'use strict';if(this.$ShareDialogTagSummary2)this.$ShareDialogTagSummary2.abort();var o=n.taggerData,p=o.get('people'),q=o.get('place'),r=o.get('action'),s=o.get('actionIconID'),t=o.get('object'),u=o.get('products'),v=o.get('sponsors'),w=p.filter(function(ba){return !this.props.peopleToExclude.has(ba.getUniqueID());}.bind(this));if(!(w&&w.length>0)&&!q&&!(r&&t)&&!(u&&u.length>0)&&!(v&&v.sponsors.length>0)){if(this.state.socialText)this.setState({socialText:null});return;}var x={};if(w)x.people=w.map(function(ba){return ba.getUniqueID();});if(q){x.place=q.getTitle();x.placeID=q.getUniqueID();}if(u)x.productIDs=u.map(function(ba){return ba.getUniqueID();});if(v){var y=c('ifRequired')('BrandedContentSponsorRelationship',function(ba){return v.sponsorRelationship===ba.PRESENTED_BY;},function(){return false;});if(!y)x.sponsorIDs=v.sponsors.map(function(ba){return ba.getUniqueID();});}if(r&&t){x.actionID=r.getUniqueID();var z=t.getUniqueID(),aa=t.getTitle();if(!z||z===aa){x.objectStr=aa;}else x.objectID=z;}if(s)x.actionIconID=s;x.iconPickerOpened=l!==true;this.$ShareDialogTagSummary2=new (c('AsyncRequest'))();this.$ShareDialogTagSummary2&&this.$ShareDialogTagSummary2.setURI('/ajax/metacomposer/social_text.php').setData(x).setHandler(this.$ShareDialogTagSummary4).send();};m.propTypes={ogObjectClick:k.func.isRequired,onTagSummaryClick:k.func.isRequired,peopleToExclude:k.instanceOf(c('immutable').Set).isRequired,placeTokenClick:k.func.isRequired,taggerData:k.instanceOf(c('immutable').Map).isRequired,withTokenClick:k.func.isRequired};m.defaultProps={peopleToExclude:c('immutable').Set(),ogObjectClick:c('emptyFunction'),onTagSummaryClick:c('emptyFunction'),placeTokenClick:c('emptyFunction'),withTokenClick:c('emptyFunction')};f.exports=m;}),null);
__d('ReactComposerTaggerSummaryContainer.react',['cx','ReactComposerContextMixin','ReactComposerLoggingName','ReactComposerTaggerActions','ReactComposerTaggerStore','ReactComposerTaggerType','ReactComposerPropsAndStoreBasedStateMixin','ShareDialogTagSummary.react','Arbiter','immutable','React','ReactDOM','containsNode'],(function a(b,c,d,e,f,g,h){var i=c('React').createClass({displayName:'ReactComposerTaggerSummaryContainer',_ogSubscription:undefined,mixins:[c('ReactComposerContextMixin'),c('ReactComposerPropsAndStoreBasedStateMixin')(c('ReactComposerTaggerStore'))],statics:{calculateState:function j(k,l){var m=c('ReactComposerTaggerStore').getTaggersData(k),n=m[c('ReactComposerTaggerType').PEOPLE],o=m[c('ReactComposerTaggerType').LOCATION],p=m[c('ReactComposerTaggerType').ACTIVITY],q=o?o.place:null,r=m[c('ReactComposerTaggerType').PRODUCT],s=m[c('ReactComposerTaggerType').SPONSOR];return {people:n,place:q,activity:p,products:r,sponsors:s};}},componentWillMount:function j(){this._ogSubscription=c('Arbiter').subscribe('composer/ogCustomIconSelected',function(event,k){if(!c('containsNode')(c('ReactDOM').findDOMNode(this.refs.taggerSummary),k.triggerElement))return;var l=c('ReactComposerTaggerStore').getTaggerData(this.context.composerID,c('ReactComposerTaggerType').ACTIVITY)||{};l.actionIconID=k.icon_id;l.actionIconURI=k.iconURI;c('ReactComposerTaggerActions').setTaggerDataWithoutLogging(this.context.composerID,c('ReactComposerTaggerType').ACTIVITY,l);}.bind(this));},componentWillUnmount:function j(){if(this._ogSubscription){this._ogSubscription.unsubscribe&&this._ogSubscription.unsubscribe();this._ogSubscription=null;}},render:function j(){return c('React').createElement('div',{className:"_vww",'data-testid':'tagger-summary'},c('React').createElement(c('ShareDialogTagSummary.react'),{ogObjectClick:this._ogObjectClick,onTagSummaryClick:this._onTagSummaryClick,peopleToExclude:c('immutable').Set([this.context.actorID]),placeTokenClick:this._placeTokenClick,ref:'taggerSummary',taggerData:c('immutable').Map({action:this.state.activity.action,actionIconID:this.state.activity.actionIconID,object:this.state.activity.object,people:this.state.people,place:this.state.place,products:this.state.products,sponsors:this.state.sponsors}),withTokenClick:this._withTokenClick}));},_withTokenClick:function j(){c('ReactComposerTaggerActions').selectTagger(this.context.composerID,c('ReactComposerLoggingName').TAGGER_SUMMARY_PEOPLE,c('ReactComposerTaggerType').PEOPLE);},_placeTokenClick:function j(){c('ReactComposerTaggerActions').selectTagger(this.context.composerID,c('ReactComposerLoggingName').TAGGER_SUMMARY_LOCATION,c('ReactComposerTaggerType').LOCATION);},_ogObjectClick:function j(){c('ReactComposerTaggerActions').selectTagger(this.context.composerID,c('ReactComposerLoggingName').TAGGER_SUMMARY_MINUTIAE,c('ReactComposerTaggerType').ACTIVITY);},_onTagSummaryClick:function j(){c('ReactComposerTaggerActions').deselectCurrentTagger(this.context.composerID,c('ReactComposerLoggingName').TAGGER_SUMMARY_ROW);}});f.exports=i;}),null);
__d('ReactComposerTaggers.react',['cx','React'],(function a(b,c,d,e,f,g,h){var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){'use strict';return c('React').createElement('div',{className:"_1idc"},this.props.children);};function k(){'use strict';i.apply(this,arguments);}f.exports=k;}),null);
__d('ReactComposerActionTaggerItem.react',['cx','React','ImageBlock.react','joinClasses','TypeaheadViewItem'],(function a(b,c,d,e,f,g,h){var i=c('React').PropTypes,j=c('React').createClass({displayName:'ReactComposerActionTaggerItem',mixins:[c('TypeaheadViewItem').Mixin],propTypes:babelHelpers['extends']({customIcon:i.object},c('TypeaheadViewItem').propTypes),render:function k(){var l=this.props.entry,m=l.getAuxiliaryData(),n=c('React').createElement('span',{dangerouslySetInnerHTML:m.icon||this.props.customIcon}),o="_599m"+(' '+"_5mne")+(this.props.highlighted?' '+"_599n":'')+(' '+"_18d1")+(this.props.highlighted?' '+"_18d2":'');o=c('joinClasses')(o,this.props.className);return c('React').createElement('li',{'aria-selected':this.props.highlighted,className:o,onMouseDown:this._onSelect,onMouseEnter:this._onHighlight,role:this.props.role},c('React').createElement(c('ImageBlock.react'),{spacing:'medium'},n,c('React').createElement('div',{className:"_599p"},l.getTitle())),c('React').createElement('i',{className:"_18d3"}));}});f.exports=j;}),null);
__d('ReactComposerActionTaggerView.react',['ReactComposerTaggerViewMixin','ReactComposerActionTaggerItem.react','React'],(function a(b,c,d,e,f,g){var h=c('React').createClass({displayName:'ReactComposerActionTaggerView',mixins:[c('ReactComposerTaggerViewMixin')],getItemImpl:function i(){return c('ReactComposerActionTaggerItem.react');}});f.exports=h;}),null);
__d('ReactComposerActionTaggerPresenter',['ReactComposerActionTaggerView.react'],(function a(b,c,d,e,f,g){f.exports={ViewRenderer:c('ReactComposerActionTaggerView.react'),useLayer:true,maxEntries:20};}),null);
__d('WebAsyncSearchSourceWithMetrics',['AbstractAsyncSearchSource','AbstractSearchSource','AsyncRequest','Map','TypeaheadMetricReporter','WebAsyncSearchSourceUtils','uuid'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('AbstractSearchSource'));i=h&&h.prototype;function j(k,l){'use strict';i.constructor.call(this);this.$WebAsyncSearchSourceWithMetrics1=new (c('AbstractAsyncSearchSource'))(k,this.$WebAsyncSearchSourceWithMetrics4.bind(this),c('WebAsyncSearchSourceUtils').normalizeResponse);this.$WebAsyncSearchSourceWithMetrics2=new (c('TypeaheadMetricReporter'))(l);this.$WebAsyncSearchSourceWithMetrics3=new (c('Map'))();this.$WebAsyncSearchSourceWithMetrics2.addListener&&this.$WebAsyncSearchSourceWithMetrics2.addListener('reset',function(m){this.$WebAsyncSearchSourceWithMetrics1.setRequestData({sid:m.sid});}.bind(this));}j.prototype.bootstrapImpl=function(k){'use strict';this.$WebAsyncSearchSourceWithMetrics2.reportBootstrapBegin();this.$WebAsyncSearchSourceWithMetrics1.bootstrap(function(){this.$WebAsyncSearchSourceWithMetrics1.getBootstrappedEntries(function(l){this.$WebAsyncSearchSourceWithMetrics2.reportBootstrapComplete(l.map(function(m){return m.getType();}));k();}.bind(this));}.bind(this));};j.prototype.searchImpl=function(k,l,m){'use strict';this.$WebAsyncSearchSourceWithMetrics2.reportQueryBegin(k);if(m)this.$WebAsyncSearchSourceWithMetrics2.reportStrategyName(m.strategyName);var n=Date.now();this.$WebAsyncSearchSourceWithMetrics1.search(k,function(o,p,q){this.$WebAsyncSearchSourceWithMetrics2.reportQueryComplete(Date.now()-n,0);l(o,p,q);}.bind(this),m);};j.prototype.getBootstrappedEntries=function(k){'use strict';return this.$WebAsyncSearchSourceWithMetrics1.getBootstrappedEntries(k);};j.prototype.getAllEntriesMap=function(){'use strict';return this.$WebAsyncSearchSourceWithMetrics1.getAllEntriesMap();};j.prototype.getTypeaheadSessionID=function(){'use strict';return this.$WebAsyncSearchSourceWithMetrics2.getSID();};j.prototype.setRequestData=function(k){'use strict';this.$WebAsyncSearchSourceWithMetrics1.setRequestData(k);};j.prototype.sessionStart=function(){'use strict';this.$WebAsyncSearchSourceWithMetrics2.sessionStart();};j.prototype.sessionEnd=function(){'use strict';this.$WebAsyncSearchSourceWithMetrics2.sessionEnd();};j.prototype.reportResults=function(k){'use strict';this.$WebAsyncSearchSourceWithMetrics2.reportResults(k);};j.prototype.reportSelect=function(k,l,m,n,o,p){'use strict';this.$WebAsyncSearchSourceWithMetrics2.reportSelect(k,l,m,n,o,p);};j.prototype.reportRequestID=function(k){'use strict';this.$WebAsyncSearchSourceWithMetrics2.reportRequestID(this.$WebAsyncSearchSourceWithMetrics5(k));};j.prototype.$WebAsyncSearchSourceWithMetrics5=function(k){'use strict';var l=k;while(l.length>0){if(this.$WebAsyncSearchSourceWithMetrics3.has(l))return this.$WebAsyncSearchSourceWithMetrics3.get(l);l=l.slice(0,-1);}return this.$WebAsyncSearchSourceWithMetrics3.get('');};j.prototype.$WebAsyncSearchSourceWithMetrics4=function(k,l,m,n){'use strict';var o=k.value||'',p=c('uuid')();new (c('AsyncRequest'))(l.uri).setData(babelHelpers['extends']({request_id:p},k,l.data)).setMethod('GET').setReadOnly(true).setAllowCrossPageTransition(true).setInitialHandler(function(){this.$WebAsyncSearchSourceWithMetrics3.set(o,p);}.bind(this)).setHandler(m).setErrorHandler(n).send();};f.exports=j;}),null);
__d('ReactComposerActionTaggerComponent.react',['cx','fbt','ReactComposerActionTaggerPresenter','ReactComposerTaggerViewStyles','DummySearchSource','React','BasicTypeaheadLoggerJSConstants','WebAsyncSearchSourceWithMetrics','XUITypeahead.react','emptyFunction'],(function a(b,c,d,e,f,g,h,i){var j,k,l=c('BasicTypeaheadLoggerJSConstants').Fields,m=c('React').PropTypes;j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;function n(o){'use strict';k.constructor.call(this,o);this.$ReactComposerActionTaggerComponent1=function(p,event){var q={};q[l.SELECTED_ORIGINAL_ID]=p.getAuxiliaryData().original_id;q[l.PLACE_ID]=this.props.placeID;this.props.taggerSource.reportSelect(p.getUniqueID(),p.getType(),p.getOrder(),!!event&&event.button>=0,this.state.query,q);this.props.taggerSource.sessionEnd();this.setState({query:p.getTitle()});this.props.onSelect&&this.props.onSelect(p);}.bind(this);this.$ReactComposerActionTaggerComponent2=function(){this.setState({query:''});this.props.onSelect&&this.props.onSelect(null);}.bind(this);this.$ReactComposerActionTaggerComponent3=function(event){this.setState({query:event.target.value});}.bind(this);this.$ReactComposerActionTaggerComponent4=function(){this.props.taggerSource.sessionEnd();}.bind(this);this.$ReactComposerActionTaggerComponent5=function(){this.props.taggerSource.sessionStart();}.bind(this);this.$ReactComposerActionTaggerComponent6=function(p,q){this.props.taggerSource.reportRequestID(this.state.query);this.props.taggerSource.reportResults(p.map(function(r){return r.getUniqueID();}));}.bind(this);this.$ReactComposerActionTaggerComponent7=function(){this.props.taggerSource.reportRequestID(this.state.query);}.bind(this);this.$ReactComposerActionTaggerComponent8=function(){var p={taggerViewStyle:this.props.taggerViewStyle};return Object.assign({},c('ReactComposerActionTaggerPresenter'),{layerPosition:this.props.layerPosition||undefined,extraRendererProps:p});}.bind(this);o.taggerSource.sessionStart();this.state={query:''};}n.prototype.componentWillUnmount=function(){'use strict';this.props.taggerSource.sessionEnd();};n.prototype.render=function(){'use strict';return c('React').createElement('div',{className:"_3uco _5esl"},c('React').createElement(c('XUITypeahead.react'),{presenter:this.$ReactComposerActionTaggerComponent8(),focusedOnInit:this.props.autoFocus,showEntriesOnFocus:true,placeholder:i._("What are you doing?"),className:"_5esx _3ucr",queryString:this.state.query,searchSource:this.props.taggerSource,highlightOnSelect:true,onSelectAttempt:this.$ReactComposerActionTaggerComponent1,onClear:this.$ReactComposerActionTaggerComponent2,onChange:this.$ReactComposerActionTaggerComponent3,onBlur:this.$ReactComposerActionTaggerComponent4,onFocus:this.$ReactComposerActionTaggerComponent5,onEntriesFound:this.$ReactComposerActionTaggerComponent6,onNoEntriesFound:this.$ReactComposerActionTaggerComponent7,tallInput:true,autoHighlight:true}));};n.propTypes={autoFocus:m.bool,onSelect:m.func,placeID:m.string,taggerSource:m.instanceOf(c('WebAsyncSearchSourceWithMetrics')).isRequired,taggerViewStyle:m.shape(c('ReactComposerTaggerViewStyles').Shape)};n.defaultProps={autoFocus:true,onSelect:c('emptyFunction'),taggerSource:new (c('DummySearchSource'))(),taggerViewStyle:c('ReactComposerTaggerViewStyles').DEFAULT};f.exports=n;}),null);
__d('ReactComposerActivityTaggerButton.react',['cx','fbt','ReactComposerLoggingName','ReactComposerTaggerButtonMixin','ReactComposerTaggerType','React'],(function a(b,c,d,e,f,g,h,i){var j=c('React').createClass({displayName:'ReactComposerActivityTaggerButton',mixins:[c('ReactComposerTaggerButtonMixin')],statics:{taggerID:c('ReactComposerTaggerType').ACTIVITY,loggingName:c('ReactComposerLoggingName').MINUTIAE_TAGGER},getTitle:function k(){return i._("Add what you're doing or how you're feeling");},getTooltip:function k(){return i._("Add what you're doing or how you're feeling");},getClassName:function k(){return "_3tdo";}});f.exports=j;}),null);
__d('ReactComposerObjectTaggerItem.react',['cx','BackgroundImage.react','Badge.react','ImageBlock.react','React','TypeaheadViewItem','joinClasses','Locale','UnicodeBidi'],(function a(b,c,d,e,f,g,h){var i=c('React').createClass({displayName:'ReactComposerObjectTaggerItem',mixins:[c('TypeaheadViewItem').Mixin],propTypes:c('TypeaheadViewItem').propTypes,render:function j(){var k=this.props.entry,l=k.getSubtitle()?c('React').createElement('div',{className:"_599q"},k.getSubtitle()):null,m=k.getPhoto()?c('React').createElement(c('BackgroundImage.react'),{width:32,height:32,backgroundSize:'cover',src:k.getPhoto()}):c('React').createElement('span',null),n=k.getAuxiliaryData(),o=n&&n.verified?(o=c('React').createElement(c('Badge.react'),null)):null,p=n&&n.icon?c('React').createElement('span',{className:"_mbq",dangerouslySetInnerHTML:n.icon}):null,q="_599m"+(!l?' '+"_5mne":'')+(this.props.highlighted?' '+"_599n":'');q=c('joinClasses')(q,this.props.className);var r=c('UnicodeBidi').isDirectionRTL(k.getTitle()),s=c('Locale').isRTL(),t=r&&!s?'rtl':!r&&s?'ltr':null;return c('React').createElement('li',{'aria-selected':this.props.highlighted,className:q,onMouseDown:this._onSelect,onMouseEnter:this._onHighlight,role:this.props.role},c('React').createElement(c('ImageBlock.react'),{spacing:'medium'},m,c('React').createElement('div',null,c('React').createElement('div',{className:"_599p",dir:t},k.getTitle(),o),l),p));}});f.exports=i;}),null);
__d('ReactComposerObjectTaggerView.react',['ReactComposerActionTaggerItem.react','ReactComposerObjectTaggerItem.react','ReactComposerTaggerViewMixin','React'],(function a(b,c,d,e,f,g){var h=c('React').createClass({displayName:'ReactComposerObjectTaggerView',mixins:[c('ReactComposerTaggerViewMixin')],getItemImpl:function i(){return c('ReactComposerObjectTaggerItem.react');},getRegexItemImpl:function i(){return c('ReactComposerActionTaggerItem.react');}});f.exports=h;}),null);
__d('ReactComposerObjectTaggerPresenter',['ReactComposerObjectTaggerView.react'],(function a(b,c,d,e,f,g){f.exports={ViewRenderer:c('ReactComposerObjectTaggerView.react'),useLayer:true,maxEntries:120};}),null);
__d('WebAsyncPlusRegexSearchSource',['invariant','AbstractSearchSource'],(function a(b,c,d,e,f,g,h){var i,j;i=babelHelpers.inherits(k,c('AbstractSearchSource'));j=i&&i.prototype;function k(l){'use strict';j.constructor.call(this);this.$WebAsyncPlusRegexSearchSource1=l.asyncSource;this.$WebAsyncPlusRegexSearchSource2=l.regexSource;this.$WebAsyncPlusRegexSearchSource3=!!l.appendRegexEntries;this.$WebAsyncPlusRegexSearchSource4=!!l.preferRegexEntries;!!this.$WebAsyncPlusRegexSearchSource1||h(0);!!this.$WebAsyncPlusRegexSearchSource2||h(0);}k.prototype.bootstrapImpl=function(l){'use strict';this.$WebAsyncPlusRegexSearchSource1.bootstrap(l);};k.prototype.$WebAsyncPlusRegexSearchSource5=function(l,m){'use strict';var n=[],o=false,p;for(var q=0;q<l.length;q++){p=l[q].getTitle();for(var r=0;r<m.length;r++)if(p===m[r].getTitle()){o=true;break;}if(!o){n.push(l[q]);}else o=false;}return n;};k.prototype.searchImpl=function(l,m,n){'use strict';var o=this.$WebAsyncPlusRegexSearchSource1,p=this.$WebAsyncPlusRegexSearchSource3,q=this.$WebAsyncPlusRegexSearchSource4,r=this.$WebAsyncPlusRegexSearchSource5;this.$WebAsyncPlusRegexSearchSource2.search(l,function(s){m(s,l);o.search(l,function(t){var u=[],v=[];if(q){u=s;v=r(t,s);}else{v=t;u=r(s,t);}var w=p?v.concat(u):u.concat(v);m(w,l);},n);},n);};f.exports=k;}),null);
__d('ReactComposerObjectTaggerComponent.react',['cx','ReactComposerObjectTaggerPresenter','ReactComposerTaggerViewStyles','DummySearchSource','Grid.react','React','RegexMatchSearchSource','BasicTypeaheadLoggerJSConstants','WebAsyncPlusRegexSearchSource','WebAsyncSearchSourceWithMetrics','XUITypeahead.react','emptyFunction'],(function a(b,c,d,e,f,g,h){var i,j,k=c('Grid.react').GridItem,l=c('BasicTypeaheadLoggerJSConstants').Fields,m=c('React').PropTypes;i=babelHelpers.inherits(n,c('React').Component);j=i&&i.prototype;function n(p){'use strict';j.constructor.call(this,p);o.call(this);var q=p.taggerSource,r=p.action.getUniqueID(),s=p.actionTypeIDsWithNoFreeForm,t=!s[r];if(t){var u=new (c('RegexMatchSearchSource'))('.+');q=new (c('WebAsyncPlusRegexSearchSource'))({asyncSource:q,regexSource:u,appendRegexEntries:true});}setTimeout(function(){p.taggerSource.sessionStart();},0);this.state={query:p.object?p.object.getTitle():'',searchSource:q};}n.prototype.componentWillUnmount=function(){'use strict';this.props.taggerSource.sessionEnd();};n.prototype.focusInput=function(){'use strict';var p=this.refs.objectTypeahead;if(p)p.focusInput&&p.focusInput();};n.prototype.render=function(){'use strict';var p=this.props.action.getAuxiliaryData(),q=p?p.prompt:'';return c('React').createElement(c('Grid.react'),{cols:2,className:"_5esl",role:'presentation'},c('React').createElement(k,{className:"_5esm _4zdy",key:'prefix',role:'presentation',onClick:this.$ReactComposerObjectTaggerComponent5},this.props.action.getTitle()),c('React').createElement(k,{className:"_5esw",key:'suffix',role:'presentation'},c('React').createElement(c('XUITypeahead.react'),{ref:'objectTypeahead',presenter:this.$ReactComposerObjectTaggerComponent10(),clearable:true,focusedOnInit:this.props.autoFocus,autoHighlight:true,showEntriesOnFocus:true,placeholder:q,selectedEntry:this.props.object,className:"_5esx _4zdz",queryString:this.state.query,searchSource:this.state.searchSource,highlightOnSelect:true,onSelectAttempt:this.$ReactComposerObjectTaggerComponent1,onBackspace:this.$ReactComposerObjectTaggerComponent2,onClear:this.$ReactComposerObjectTaggerComponent3,onChange:this.$ReactComposerObjectTaggerComponent4,onBlur:this.$ReactComposerObjectTaggerComponent6,onEntriesFound:this.$ReactComposerObjectTaggerComponent8,onNoEntriesFound:this.$ReactComposerObjectTaggerComponent9,onFocus:this.$ReactComposerObjectTaggerComponent7,tallInput:false})));};n.prototype.$ReactComposerObjectTaggerComponent10=function(){'use strict';var p={};p.taggerViewStyle=this.props.taggerViewStyle;p.customIcon=this.props.action.getAuxiliaryData().icon;return Object.assign({},c('ReactComposerObjectTaggerPresenter'),{layerPosition:this.props.layerPosition||undefined,extraRendererProps:p});};n.propTypes={action:m.object.isRequired,actionTypeIDsWithNoFreeForm:m.object.isRequired,autoFocus:m.bool,object:m.object,onClear:m.func.isRequired,onEmptyBackspace:m.func.isRequired,onPrefixClick:m.func.isRequired,onSelect:m.func.isRequired,placeID:m.string,taggerSource:m.instanceOf(c('WebAsyncSearchSourceWithMetrics')).isRequired,taggerViewStyle:m.shape(c('ReactComposerTaggerViewStyles').Shape)};n.defaultProps={actionTypeIDsWithNoFreeForm:{},autoFocus:true,onClear:c('emptyFunction'),onEmptyBackspace:c('emptyFunction'),onPrefixClick:c('emptyFunction'),onSelect:c('emptyFunction'),taggerSource:new (c('DummySearchSource'))(),taggerViewStyle:c('ReactComposerTaggerViewStyles').DEFAULT};var o=function p(){this.$ReactComposerObjectTaggerComponent1=function(q,event){var r={};r[l.SELECTED_ORIGINAL_ID]=q.getAuxiliaryData().original_id;r[l.PLACE_ID]=this.props.placeID;this.props.taggerSource.reportSelect(q.getUniqueID(),q.getType(),q.getOrder(),!!event&&event.button>=0,this.state.query,r);this.props.taggerSource.sessionEnd();this.setState({query:q.getTitle()});this.props.onSelect(q);}.bind(this);this.$ReactComposerObjectTaggerComponent2=function(event){if(this.props.object&&this.props.object.getTitle()===event.target.value)this.props.onSelect(null);if(event.target.value==='')this.props.onEmptyBackspace();}.bind(this);this.$ReactComposerObjectTaggerComponent3=function(){this.setState({query:''});this.props.onClear();}.bind(this);this.$ReactComposerObjectTaggerComponent4=function(event){this.setState({query:event.target.value});}.bind(this);this.$ReactComposerObjectTaggerComponent5=function(){this.props.onPrefixClick();}.bind(this);this.$ReactComposerObjectTaggerComponent6=function(){this.props.taggerSource.sessionEnd();}.bind(this);this.$ReactComposerObjectTaggerComponent7=function(){setTimeout(function(){this.props.taggerSource.sessionStart();}.bind(this),0);}.bind(this);this.$ReactComposerObjectTaggerComponent8=function(q,r){this.props.taggerSource.reportRequestID(this.state.query);this.props.taggerSource.reportResults(q.map(function(s){return s.getUniqueID();}));}.bind(this);this.$ReactComposerObjectTaggerComponent9=function(){this.props.taggerSource.reportRequestID(this.state.query);}.bind(this);};f.exports=n;}),null);
__d('ReactComposerObjectTaggerContainer.react',['ReactComposerObjectTaggerComponent.react','ReactComposerPropsAndStoreBasedStateMixin','ReactComposerTaggerStore','ReactComposerTaggerType','ReactComposerTaggerViewStyles','React','emptyFunction'],(function a(b,c,d,e,f,g){var h=c('React').PropTypes,i=c('React').createClass({displayName:'ReactComposerObjectTaggerContainer',mixins:[c('ReactComposerPropsAndStoreBasedStateMixin')(c('ReactComposerTaggerStore'))],propTypes:{action:h.object.isRequired,autoFocus:h.bool,onClear:h.func.isRequired,onEmptyBackspace:h.func.isRequired,onPrefixClick:h.func.isRequired,onSelect:h.func.isRequired,object:h.object,taggerViewStyle:h.shape(c('ReactComposerTaggerViewStyles').Shape)},getDefaultProps:function j(){return {autoFocus:true,onClear:c('emptyFunction'),onEmptyBackspace:c('emptyFunction'),onPrefixClick:c('emptyFunction'),onSelect:c('emptyFunction'),taggerViewStyle:c('ReactComposerTaggerViewStyles').DEFAULT};},statics:{calculateState:function j(k,l){var m=c('ReactComposerTaggerStore').getTaggerSource(k,c('ReactComposerTaggerType').OG);return {taggerSource:m};}},render:function j(){return c('React').createElement(c('ReactComposerObjectTaggerComponent.react'),babelHelpers['extends']({ref:'objectTagger'},this.props,{taggerSource:this.state.taggerSource}));},focusInput:function j(){var k=this.refs.objectTagger;k&&k.focusInput();}});f.exports=i;}),null);
__d('ReactComposerActivityTaggerComponent.react',['ReactComposerActionTaggerComponent.react','ReactComposerObjectTaggerContainer.react','ReactComposerTaggerViewStyles','DummySearchSource','React','WebAsyncSearchSourceWithMetrics','emptyFunction'],(function a(b,c,d,e,f,g){var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(){var l,m;'use strict';for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.state={action:this.props.taggerData.action,object:this.props.taggerData.object},this.$ReactComposerActivityTaggerComponent3=function(q){this.props.onSelect&&this.props.onSelect(this.getTaggerData(q,null));this.setState({action:q});}.bind(this),this.$ReactComposerActivityTaggerComponent2=function(q){this.props.onSelect&&this.props.onSelect(this.getTaggerData(this.state.action,q));this.setState({object:q});}.bind(this),this.$ReactComposerActivityTaggerComponent1=function(){this.props.onSelect&&this.props.onSelect(this.getTaggerData(null,null));this.setState({action:null,object:null});}.bind(this),this.getTaggerData=function(q,r){var s=this.props.taggerData;s.action=q;s.object=r;return s;}.bind(this),m;}k.prototype.componentDidUpdate=function(){'use strict';if(this.state.action&&!this.state.object){var l=this.refs.objectTagger;l&&l.focusInput();}};k.prototype.componentWillUnmount=function(){'use strict';if(this.state.action&&!this.state.object)this.$ReactComposerActivityTaggerComponent1();};k.prototype.render=function(){'use strict';if(this.state.action)return c('React').createElement(c('ReactComposerObjectTaggerContainer.react'),{ref:'objectTagger',action:this.state.action,actionTypeIDsWithNoFreeForm:this.props.actionTypeIDsWithNoFreeForm,autoFocus:this.props.autoFocus,layerPosition:this.props.layerPosition,object:this.state.object,onClear:this.$ReactComposerActivityTaggerComponent1,onEmptyBackspace:this.$ReactComposerActivityTaggerComponent1,onPrefixClick:this.$ReactComposerActivityTaggerComponent1,onSelect:this.$ReactComposerActivityTaggerComponent2,placeID:this.props.placeID,taggerViewStyle:this.props.objectTaggerViewStyle});return c('React').createElement(c('ReactComposerActionTaggerComponent.react'),{autoFocus:this.props.autoFocus,layerPosition:this.props.layerPosition,onSelect:this.$ReactComposerActivityTaggerComponent3,placeID:this.props.placeID,taggerSource:this.props.taggerSource,taggerViewStyle:this.props.actionTaggerViewStyle});};k.propTypes={actionTypeIDsWithNoFreeForm:j.object.isRequired,actorID:j.string.isRequired,autoFocus:j.bool,placeID:j.string,taggerData:j.object.isRequired,taggerSource:j.instanceOf(c('WebAsyncSearchSourceWithMetrics')).isRequired,onSelect:j.func.isRequired,actionTaggerViewStyle:j.shape(c('ReactComposerTaggerViewStyles').Shape),objectTaggerViewStyle:j.shape(c('ReactComposerTaggerViewStyles').Shape)};k.defaultProps={actionTypeIDsWithNoFreeForm:{},autoFocus:true,taggerData:{},taggerSource:new (c('DummySearchSource'))(),onSelect:c('emptyFunction'),actionTaggerViewStyle:c('ReactComposerTaggerViewStyles').DEFAULT,objectTaggerViewStyle:c('ReactComposerTaggerViewStyles').DEFAULT};f.exports=k;}),null);
__d('ReactComposerActivityTaggerContainer.react',['ReactComposerActivityTaggerComponent.react','ReactComposerAttachmentStore','ReactComposerAttachmentType','ReactComposerLocationAttachmentActions','ReactComposerLoggingName','ReactComposerMinutiaeAttachmentActions','ReactComposerTaggerActions','ReactComposerTaggerContainerMixin','ReactComposerTaggerStore','ReactComposerTaggerType','ReactComposerTaggerViewStyles','ReactComposerTypeaheadSearchSourceConfig','ReactComposerTypeaheadSearchSourceType','BasicTypeaheadLoggerJSConstants','Map','MinutiaeVerbs','React','WebAsyncSearchSourceWithMetrics','getObjectValues'],(function a(b,c,d,e,f,g){var h=c('React').PropTypes,i=c('React').createClass({displayName:'ReactComposerActivityTaggerContainer',_actionTypeSearchSources:new (c('Map'))(),_objectSearchSources:new (c('Map'))(),_searchSourceConfig:null,mixins:[c('ReactComposerTaggerContainerMixin')()],statics:{taggerID:c('ReactComposerTaggerType').ACTIVITY,loggingName:c('ReactComposerLoggingName').MINUTIAE_TAGGER,taggerComponent:c('ReactComposerActivityTaggerComponent.react'),enableHideOnEscape:true,webDriverTestID:'activity-tagger-component'},propTypes:{actionTypeIDsToPrefetch:h.array.isRequired,actionTypeIDsWithNoFreeForm:h.object.isRequired,isPersonalTimeline:h.bool,rankVerbs:h.bool,placeID:h.string,typeaheadLoggerEventName:h.oneOf(c('getObjectValues')(c('BasicTypeaheadLoggerJSConstants').EventNames)).isRequired,actionTaggerViewStyle:h.shape(c('ReactComposerTaggerViewStyles').Shape),objectTaggerViewStyle:h.shape(c('ReactComposerTaggerViewStyles').Shape),fixGametimePromptToAddScore:h.bool},getDefaultProps:function j(){return {actionTypeIDsToPrefetch:[],actionTypeIDsWithNoFreeForm:{},isPersonalTimeline:false,placeID:null,rankVerbs:false,actionTaggerViewStyle:c('ReactComposerTaggerViewStyles').DEFAULT,objectTaggerViewStyle:c('ReactComposerTaggerViewStyles').DEFAULT,fixGametimePromptToAddScore:false};},getInitialState:function j(){return {hasDoneInitialObjectPrefetch:false};},componentWillMount:function j(){this._searchSourceConfig=c('ReactComposerTypeaheadSearchSourceConfig')[c('ReactComposerTypeaheadSearchSourceType').ACTIVITY];this._updateActionTypeSearchSource(this.props.placeID);this.state.taggerData&&this.__onTaggerDataChanged(this.state.taggerData);},componentWillReceiveProps:function j(k){if(k.placeID!==this.props.placeID){this._updateActionTypeSearchSource(k.placeID);this._prefetchObjectSearchSources(k.placeID);}},componentWillUpdate:function j(k,l){if(!this.state.isSelected&&l.isSelected){var m=this._actionTypeSearchSources.get(this.props.placeID).getTypeaheadSessionID();this._createAndBootstrapActionTypeSearchSource(this.props.placeID,{sid:m});var n=this.state.hasDoneInitialObjectPrefetch||l.hasDoneInitialObjectPrefetch;if(!n)this._prefetchObjectSearchSources(this.props.placeID);var o=l.taggerData;if(o.action)this._updateObjectSearchSource(o.action.getUniqueID());}this._updateEligibility();},_suppressUpdateLogging:function j(k){return k.action&&!k.object;},__onTaggerDataChanged:function j(k){if(k.action){this._updateObjectSearchSource(k.action.getUniqueID());if(!k.object){var l=this._objectSearchSources.get(k.action.getUniqueID()).getTypeaheadSessionID();this._createAndBootstrapObjectSearchSource(k.action.getUniqueID(),this.props.placeID,{sid:l});}}if(k.action&&k.object){c('ReactComposerTaggerActions').deselectCurrentTagger(this.context.composerID,this.constructor.loggingName);var m=this._shouldFetchMinutiaeAttachment(k.action,k.object);if(m){if(k.action.getUniqueID()==c('MinutiaeVerbs').COMPOSER_TRAVELS.toString()){c('ReactComposerLocationAttachmentActions').setMinutiaeActionContext(this.context.composerID,k.object.getUniqueID(),!!this.props.isPersonalTimeline);}else c('ReactComposerLocationAttachmentActions').setMinutiaeActionContext(this.context.composerID,null,!!this.props.isPersonalTimeline);c('ReactComposerMinutiaeAttachmentActions').fetchMinutiaeAttachment(this.context.composerID,k.action.getUniqueID(),k.object.getUniqueID(),this.context.targetID,this.context.actorID,!!this.props.isPersonalTimeline);}}else c('ReactComposerMinutiaeAttachmentActions').setMarkup(this.context.composerID,null);},_shouldFetchMinutiaeAttachment:function j(k,l){var m=c('ReactComposerAttachmentStore').getIsAttachmentSelected(this.context.composerID,c('ReactComposerAttachmentType').STATUS);if(!m)return false;if(l.getAuxiliaryData().isRegexEntry)return false;return true;},_updateActionTypeSearchSource:function j(k){var l=null;if(this._actionTypeSearchSources.has(k)){l=this._actionTypeSearchSources.get(k);}else{l=this._createAndBootstrapActionTypeSearchSource(k,{is_prefetching:true});this._actionTypeSearchSources.set(k,l);}c('ReactComposerTaggerActions').setTaggerSource(this.context.composerID,c('ReactComposerTaggerType').ACTIVITY,l);},_createAndBootstrapActionTypeSearchSource:function j(k,l){var m='/ajax/metacomposer/attachment/og/typeahead/bootstrap/action_type_loader',n={place_id:k,rank_verbs:this.props.rankVerbs,viewer:this.props.actorID},o={getAllForEmptyQuery:true,bootstrapRequests:[{uri:m,data:Object.assign({},n)}],queryRequests:[],auxiliaryFields:this._searchSourceConfig.action&&this._searchSourceConfig.action.auxiliaryFields};if(this.props.rankVerbs)o.queryRequests=[{uri:m,data:Object.assign({},n)}];var p={event_name:this.props.typeaheadLoggerEventName,minutiae_composer_version:c('BasicTypeaheadLoggerJSConstants').MinutiaeComposerVersions.REACT,at_id:c('MinutiaeVerbs').COMPOSER_SELECTS_VERB},q=new (c('WebAsyncSearchSourceWithMetrics'))(o,p),r=q.getTypeaheadSessionID();q.setRequestData(l);q.bootstrap();q.setRequestData({sid:r});return q;},_prefetchObjectSearchSources:function j(k){var l=this.props.actionTypeIDsToPrefetch,m=new (c('Map'))();l.forEach(function(n){var o=this._createAndBootstrapObjectSearchSource(n,k,{is_prefetching:true});m.set(n,o);}.bind(this));this._objectSearchSources=m;this.setState({hasDoneInitialObjectPrefetch:true});},_updateObjectSearchSource:function j(k){var l=null;if(this._objectSearchSources.has(k)){l=this._objectSearchSources.get(k);}else{l=this._createAndBootstrapObjectSearchSource(k,this.props.placeID,{is_prefetching:false});this._objectSearchSources.set(k,l);}c('ReactComposerTaggerActions').setTaggerSource(this.context.composerID,c('ReactComposerTaggerType').OG,l);},_createAndBootstrapObjectSearchSource:function j(k,l,m){var n='/ajax/metacomposer/attachment/og/typeahead/query/object_loader',o={at_id:k,place_id:l,viewer:this.props.actorID},p={getAllForEmptyQuery:true,bootstrapRequests:[{uri:n,data:Object.assign({},o,{is_bootstrap:true})}],queryRequests:[{uri:n,data:Object.assign({},o,{is_bootstrap:false})}],auxiliaryFields:this._searchSourceConfig.object&&this._searchSourceConfig.object.auxiliaryFields},q={event_name:this.props.typeaheadLoggerEventName,minutiae_composer_version:c('BasicTypeaheadLoggerJSConstants').MinutiaeComposerVersions.REACT,at_id:k},r=new (c('WebAsyncSearchSourceWithMetrics'))(p,q),s=r.getTypeaheadSessionID();r.setRequestData(m);r.bootstrap();r.setRequestData({sid:s});return r;},_updateEligibility:function j(){var k=c('ReactComposerTaggerStore').getTaggerData(this.context.composerID,c('ReactComposerTaggerType').CONTACT_YOUR_REPRESENTATIVE),l=!!k.politicalRepresentative,m=c('ReactComposerTaggerStore').shouldHideTaggerButton(this.context.composerID,c('ReactComposerTaggerType').ACTIVITY);if(m!==l)c('ReactComposerTaggerActions').setShouldHideTaggerButton(this.context.composerID,c('ReactComposerTaggerType').ACTIVITY,l);}});f.exports=i;}),null);
__d('ReactComposerLocationSearchSource',['ReactComposerTypeaheadSearchSourceConfig','ReactComposerTypeaheadSearchSourceType','SearchableEntry','WebAsyncSearchSourceWithMetrics'],(function a(b,c,d,e,f,g){function h(i,j,k){var l=c('ReactComposerTypeaheadSearchSourceConfig')[c('ReactComposerTypeaheadSearchSourceType').LOCATION],m=Object.assign(l,j),n=Object.assign(l,i),l={bootstrapRequests:[{uri:'/ajax/places/typeahead',data:n}],getAllForEmptyQuery:true,queryRequests:[{uri:'/ajax/places/typeahead',data:m}],packageFn:function o(p){return p?new (c('SearchableEntry'))(p):null;}};return new (c('WebAsyncSearchSourceWithMetrics'))(l,k);}f.exports=h;}),null);
__d('ReactComposerLocationTaggerButton.react',['cx','fbt','ReactComposerLoggingName','ReactComposerTaggerButtonMixin','ReactComposerTaggerType','React'],(function a(b,c,d,e,f,g,h,i){var j=c('React').createClass({displayName:'ReactComposerLocationTaggerButton',mixins:[c('ReactComposerTaggerButtonMixin')],statics:{taggerID:c('ReactComposerTaggerType').LOCATION,loggingName:c('ReactComposerLoggingName').LOCATION_TAGGER},getTitle:function k(){return i._("Tag a location");},getTooltip:function k(){return i._("Check In");},getClassName:function k(){return "_3gqo";}});f.exports=j;}),null);
__d('ReactComposerLocationTypeaheadComponent.react',['fbt','React','WebAsyncSearchSourceWithMetrics','XUITypeahead.react','emptyFunction'],(function a(b,c,d,e,f,g,h){var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(m){'use strict';j.constructor.call(this,m);this.$ReactComposerLocationTypeaheadComponent9=function(){return Object.assign({},this.props.taggerData);}.bind(this);this.$ReactComposerLocationTypeaheadComponent8=function(o,event){this.props.taggerSource.reportSelect(o.getUniqueID(),o.getType(),o.getOrder(),!!event&&event.button>=0,this.state.query);this.props.taggerSource.sessionEnd();var p=this.$ReactComposerLocationTypeaheadComponent9();p.place=o;this.setState({query:o.getTitle()});this.props.onSelect&&this.props.onSelect(p);}.bind(this);this.$ReactComposerLocationTypeaheadComponent3=function(event){this.setState({query:event.target.value});}.bind(this);this.$ReactComposerLocationTypeaheadComponent1=function(event){if(this.state.query===event.target.value)this.$ReactComposerLocationTypeaheadComponent10();}.bind(this);this.$ReactComposerLocationTypeaheadComponent4=function(){this.$ReactComposerLocationTypeaheadComponent10();this.setState({query:''});}.bind(this);this.$ReactComposerLocationTypeaheadComponent10=function(){var o=this.$ReactComposerLocationTypeaheadComponent9();o.place=null;if(!this.props.implicitLocationEnabled)o.implicitLocation=null;this.props.onSelect&&this.props.onSelect(o);}.bind(this);this.$ReactComposerLocationTypeaheadComponent2=function(){this.props.taggerSource.sessionEnd();}.bind(this);this.$ReactComposerLocationTypeaheadComponent6=function(){this.props.taggerSource.sessionStart();}.bind(this);this.$ReactComposerLocationTypeaheadComponent5=function(o,p){this.props.taggerSource.reportRequestID(this.state.query);this.props.taggerSource.reportResults(o.map(function(q){return q.getUniqueID();}));}.bind(this);this.$ReactComposerLocationTypeaheadComponent7=function(){this.props.taggerSource.reportRequestID(this.state.query);}.bind(this);m.taggerSource.sessionStart();var n={};if(m.defaultLocation){n.query=m.defaultLocation;}else n.query=m.taggerData.place?m.taggerData.place.getTitle():'';this.state=n;}l.prototype.componentWillUnmount=function(){'use strict';this.props.taggerSource.sessionEnd();};l.prototype.render=function(){'use strict';return c('React').createElement(c('XUITypeahead.react'),{className:this.props.className,clearable:true,focusedOnInit:this.props.autoFocus,highlightOnSelect:true,initialEntry:this.props.taggerData.place,onBackspace:this.$ReactComposerLocationTypeaheadComponent1,onBlur:this.$ReactComposerLocationTypeaheadComponent2,onChange:this.$ReactComposerLocationTypeaheadComponent3,onClear:this.$ReactComposerLocationTypeaheadComponent4,onEntriesFound:this.$ReactComposerLocationTypeaheadComponent5,onFocus:this.$ReactComposerLocationTypeaheadComponent6,onNoEntriesFound:this.$ReactComposerLocationTypeaheadComponent7,onSelectAttempt:this.$ReactComposerLocationTypeaheadComponent8,placeholder:this.props.placeholder,presenter:this.props.presenter,queryString:this.state.query,searchSource:this.props.taggerSource,selectedEntry:this.props.taggerData.place,showEntriesOnFocus:true,tallInput:false});};l.propTypes={autoFocus:k.bool,defaultLocation:k.string,implicitLocationEnabled:k.bool,onSelect:k.func,placeholder:k.string,presenter:k.object,taggerData:k.object.isRequired,taggerSource:k.instanceOf(c('WebAsyncSearchSourceWithMetrics')).isRequired};l.defaultProps={autoFocus:true,implicitLocationEnabled:false,onSelect:c('emptyFunction'),placeholder:h._("Where are you?"),taggerData:{}};f.exports=l;}),null);
__d('ReactComposerLocationTaggerComponent.react',['cx','fbt','ReactComposerLocationTypeaheadComponent.react','ReactComposerTaggerPresenter','ReactComposerTaggerViewStyles','Grid.react','React','WebAsyncSearchSourceWithMetrics'],(function a(b,c,d,e,f,g,h,i){var j,k,l=c('Grid.react').GridItem,m=c('React').PropTypes;j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;function n(){var o,p;'use strict';for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.$ReactComposerLocationTaggerComponent1=function(){var t={taggerViewStyle:this.props.taggerViewStyle};return Object.assign({},c('ReactComposerTaggerPresenter'),{layerPosition:this.props.layerPosition||undefined,extraRendererProps:t,maxEntries:15});}.bind(this),p;}n.prototype.render=function(){'use strict';return c('React').createElement(c('Grid.react'),{cols:2,className:"_5esl",role:'presentation'},c('React').createElement(l,{key:'prefix',className:"_5esm",role:'presentation'},i._("At")),c('React').createElement(l,{key:'tagger',className:"_5esw",role:'presentation'},c('React').createElement(c('ReactComposerLocationTypeaheadComponent.react'),babelHelpers['extends']({},this.props,{className:"_5esx _1wqz",presenter:this.$ReactComposerLocationTaggerComponent1()}))));};n.propTypes={autoFocus:m.bool,implicitLocationEnabled:m.bool,onSelect:m.func,placeholder:m.string,taggerData:m.object.isRequired,taggerSource:m.instanceOf(c('WebAsyncSearchSourceWithMetrics')).isRequired,taggerViewStyle:m.shape(c('ReactComposerTaggerViewStyles').Shape)};n.defaultProps={taggerViewStyle:c('ReactComposerTaggerViewStyles').DEFAULT};f.exports=n;}),null);
__d('ReactComposerLocationTaggerContainer.react',['ReactComposerLocationSearchSource','ReactComposerLocationAttachmentActions','ReactComposerLocationAttachmentStore','ReactComposerLocationTaggerComponent.react','ReactComposerLoggingName','ReactComposerMinutiaeAttachmentActions','ReactComposerTaggerActions','ReactComposerTaggerContainerMixin','ReactComposerTaggerType','ReactComposerTaggerViewStyles','BasicTypeaheadLoggerJSConstants','MinutiaeVerbs','PlaceSearchConstants','React','areEqual','emptyFunction','getObjectValues'],(function a(b,c,d,e,f,g){var h=c('BasicTypeaheadLoggerJSConstants').EventNames,i=c('React').PropTypes,j=c('React').createClass({displayName:'ReactComposerLocationTaggerContainer',_taggerSourceInitialized:false,mixins:[c('ReactComposerTaggerContainerMixin')()],propTypes:{hideGeoHubs:i.bool,implicitLocationEnabled:i.bool,mediaLocation:i.shape({latitude:i.number.isRequired,longitude:i.number.isRequired}),onSelect:i.func.isRequired,taggerConfig:i.object,taggerViewStyle:i.shape(c('ReactComposerTaggerViewStyles').Shape),typeaheadLoggerEventName:i.oneOf(c('getObjectValues')(h)).isRequired,typeaheadSearchSource:i.oneOf(c('getObjectValues')(c('PlaceSearchConstants'))).isRequired},getDefaultProps:function k(){return {hideGeoHubs:false,onSelect:c('emptyFunction'),taggerViewStyle:c('ReactComposerTaggerViewStyles').DEFAULT};},componentWillMount:function k(){if(!this._taggerSourceInitialized){this._setNewSearchSource(this.props);this._taggerSourceInitialized=true;this.state.taggerData&&this.__onTaggerDataChanged(this.state.taggerData);}},componentWillReceiveProps:function k(l){if(!c('areEqual')(l.mediaLocation,this.props.mediaLocation))this._setNewSearchSource(l);},statics:{taggerID:c('ReactComposerTaggerType').LOCATION,loggingName:c('ReactComposerLoggingName').LOCATION_TAGGER,taggerComponent:c('ReactComposerLocationTaggerComponent.react'),enableHideOnEscape:true},__onTaggerDataChanged:function k(l){var m=l.place&&l.place.getAuxiliaryData();if(m)l.implicitLocation={cityid:m.cityID,citypageid:m.cityPageID,citystring:m.cityName};var n=c('ReactComposerLocationAttachmentStore').getMinutiaeTaggedPlace(this.context.composerID),o=c('ReactComposerLocationAttachmentStore').getIsTimeline(this.context.composerID),p=function q(r,s,t,u){c('ReactComposerMinutiaeAttachmentActions').setExplicitLocation(r,t);if(n)c('ReactComposerMinutiaeAttachmentActions').fetchMinutiaeAttachment(r,c('MinutiaeVerbs').COMPOSER_TRAVELS.toString(),n,s,u,o);};if(l.place){p(this.context.composerID,this.context.targetID,l.place.getUniqueID(),this.context.actorID);c('ReactComposerTaggerActions').deselectCurrentTagger(this.context.composerID,this.constructor.loggingName);c('ReactComposerLocationAttachmentActions').fetchLocationAttachment(this.context.composerID,l.place.getUniqueID(),this.context.targetID);}else{p(this.context.composerID,this.context.targetID,null,this.context.actorID);c('ReactComposerLocationAttachmentActions').setMarkup(this.context.composerID,null);}},_setNewSearchSource:function k(l){var m={latitude:(l.mediaLocation||{}).latitude,longitude:(l.mediaLocation||{}).longitude},n={hide_geo:l.hideGeoHubs,latitude:(l.mediaLocation||{}).latitude,longitude:(l.mediaLocation||{}).longitude},o={event_name:l.typeaheadLoggerEventName,event_specific_data:{context:'places_typeahead:'+l.typeaheadSearchSource,source:l.typeaheadSearchSource,ref:'ReactComposerLocationTypeaheadComponent.react'}},p=c('ReactComposerLocationSearchSource')(m,n,o);c('ReactComposerTaggerActions').setTaggerSource(this.context.composerID,c('ReactComposerTaggerType').LOCATION,p);}});f.exports=j;}),null);
__d('ReactComposerPeopleTaggerButton.react',['cx','fbt','ReactComposerLoggingName','ReactComposerTaggerButtonMixin','ReactComposerTaggerType','React','CurrentUser'],(function a(b,c,d,e,f,g,h,i){var j=c('React').PropTypes,k=c('React').createClass({displayName:'ReactComposerPeopleTaggerButton',mixins:[c('ReactComposerTaggerButtonMixin')],propTypes:{isMultiCompanyGroup:j.bool},statics:{taggerID:c('ReactComposerTaggerType').PEOPLE,loggingName:c('ReactComposerLoggingName').PEOPLE_TAGGER},getTitle:function l(){if(c('CurrentUser').isWorkUser()&&!this.props.isMultiCompanyGroup)return i._("Tag coworkers");return i._("Tag people");},getTooltip:function l(){if(c('CurrentUser').isWorkUser()&&!this.props.isMultiCompanyGroup)return i._("Tag coworkers in your post");return i._("Tag people in your post");},getClassName:function l(){return "_51y3";}});f.exports=k;}),null);
__d('ReactComposerPeopleTaggerComponent.react',['cx','fbt','ReactComposerPeopleTaggerTokenizerToken.react','ReactComposerTaggerPresenter','ReactComposerTaggerViewStyles','TaggingLimits','Grid.react','React','XUITokenizer.react','emptyFunction','CurrentUser'],(function a(b,c,d,e,f,g,h,i){var j,k,l=c('Grid.react').GridItem,m=c('React').PropTypes;j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;function n(){var o,p;'use strict';for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.$ReactComposerPeopleTaggerComponent1=function(t){var u=this.props.taggerData,v=t.getUniqueID(),w=u.some(function(x){return x.getUniqueID()===v;});if(w){return;}else u.push(t);this.props.onSelect&&this.props.onSelect(u);}.bind(this),this.$ReactComposerPeopleTaggerComponent2=function(t){var u=this.props.taggerData,v=u.indexOf(t);if(v==-1)return;u.splice(v,1);this.props.onPeopleTagRemove&&this.props.onPeopleTagRemove(t);this.props.onSelect&&this.props.onSelect(u);}.bind(this),this.$ReactComposerPeopleTaggerComponent3=function(){var t=this.props.taggerConfig&&this.props.taggerConfig.presenter?this.props.taggerConfig.presenter:c('ReactComposerTaggerPresenter'),u={};u.taggerViewStyle=this.props.taggerViewStyle;u.viewProps=this.props.taggerConfig&&this.props.taggerConfig.typeaheadViewProps;return Object.assign({},t,{layerPosition:this.props.layerPosition||undefined,extraRendererProps:u,TokenRenderer:c('ReactComposerPeopleTaggerTokenizerToken.react')});}.bind(this),p;}n.prototype.render=function(){'use strict';var o={};if(this.props.actorID)o[this.props.actorID]=true;return c('React').createElement(c('Grid.react'),{cols:2,className:"_5esl",role:'presentation'},c('React').createElement(l,{key:'label',className:"_5esm",role:'presentation'},i._("With")),c('React').createElement(l,{key:'tokenizer',className:"_5esw",role:'presentation'},c('React').createElement(c('XUITokenizer.react'),babelHelpers['extends']({presenter:this.$ReactComposerPeopleTaggerComponent3(),focusedOnInit:this.props.autoFocus,excludedEntries:o,entries:this.props.taggerData,className:"_5esx _2fzs",placeholder:this.props.placeholder,searchSource:this.props.taggerSource,onAddEntryAttempt:this.$ReactComposerPeopleTaggerComponent1,onRemoveEntryAttempt:this.$ReactComposerPeopleTaggerComponent2,limit:c('TaggingLimits').MAX_WITH_TAGS},this.props))));};n.propTypes={actorID:m.string,autoFocus:m.bool,placeholder:m.string,taggerConfig:m.object,taggerData:m.array.isRequired,taggerSource:m.object.isRequired,onPeopleTagRemove:m.func,onSelect:m.func,taggerViewStyle:m.shape(c('ReactComposerTaggerViewStyles').Shape)};n.defaultProps=function(){var o=i._("Who are you with?");if(c('CurrentUser').isWorkUser())o=i._("Who do you want to tag?");return {autoFocus:true,onSelect:c('emptyFunction'),placeholder:o,taggerViewStyle:c('ReactComposerTaggerViewStyles').DEFAULT,taggerData:[]};}();f.exports=n;}),null);
__d('ReactComposerPeopleTaggerContainer.react',['ReactComposerLoggingName','ReactComposerPeopleTaggerComponent.react','ReactComposerPhotoActions','ReactComposerTaggerActions','ReactComposerTaggerContainerStateMixin','ReactComposerTaggerHideOnEscapeKeyPress.react','ReactComposerTaggerType','ReactComposerTaggerViewStyles','React'],(function a(b,c,d,e,f,g){var h=c('React').PropTypes,i=c('React').createClass({displayName:'ReactComposerPeopleTaggerContainer',mixins:[c('ReactComposerTaggerContainerStateMixin')()],propTypes:{actorID:h.string,taggerConfig:h.object,taggerViewStyle:h.shape(c('ReactComposerTaggerViewStyles').Shape)},getDefaultProps:function j(){return {taggerViewStyle:c('ReactComposerTaggerViewStyles').DEFAULT};},statics:{taggerID:c('ReactComposerTaggerType').PEOPLE},render:function j(){if(!this.state.isSelected)return c('React').createElement('noscript',null);return c('React').createElement('div',{'data-testid':'people-tagger-component'},c('React').createElement(c('ReactComposerTaggerHideOnEscapeKeyPress.react'),{shouldHideOnEscape:this.state.isSelected},c('React').createElement(c('ReactComposerPeopleTaggerComponent.react'),babelHelpers['extends']({},this.props,{autoFocus:this.state.autoFocus,onPeopleTagRemove:this._onPeopleTagRemove,onSelect:this._onTaggerDataChanged,taggerData:this.state.taggerData,taggerSource:this.state.taggerSource}))));},_onTaggerDataChanged:function j(k){c('ReactComposerTaggerActions').setTaggerData(this.context.composerID,c('ReactComposerLoggingName').PEOPLE_TAGGER,c('ReactComposerTaggerType').PEOPLE,k);this.props.onSelect&&this.props.onSelect(k);},_onPeopleTagRemove:function j(k){c('ReactComposerPhotoActions').untagSubjectFromAllPhotos(this.context.composerID,k.getUniqueID());}});f.exports=i;}),null);
__d('ReactComposerTopicFeedsTaggerActionType',['keyMirrorRecursive'],(function a(b,c,d,e,f,g){f.exports=c('keyMirrorRecursive')({USER_ADD_TAG:null,USER_REMOVE_TAG:null,PREFILL_TAGS:null,SERVER_UPDATE_TAGS:null,SET_COMPOSER_FEED_ID:null,SET_PHOTO_AUTO_TAGGING_DELAY:null,SET_PHOTO_POLLING_DURATION:null,SET_PHOTO_POLLING_INTERVAL:null,SET_TAGGER_MOUNTED:null,SET_TEXT_AUTO_TAGGING_DELAY:null,SET_RESHARE_URL:null,SET_DARK_LAUNCH:null,SET_TARGET_ID:null},'ReactComposerTopicFeedsTaggerActionType');}),null);
__d('ReactComposerTopicFeedsTaggerActions',['ReactComposerTopicFeedsTaggerActionType','ReactComposerDispatcher'],(function a(b,c,d,e,f,g){h.prototype.addTag=function(i,j){'use strict';c('ReactComposerDispatcher').dispatch({composerID:i,topicID:j,type:c('ReactComposerTopicFeedsTaggerActionType').USER_ADD_TAG});};h.prototype.removeTag=function(i,j){'use strict';c('ReactComposerDispatcher').dispatch({composerID:i,topicID:j,type:c('ReactComposerTopicFeedsTaggerActionType').USER_REMOVE_TAG});};h.prototype.setDarkLaunch=function(i,j){'use strict';c('ReactComposerDispatcher').dispatch({composerID:i,isDarkLaunch:j,type:c('ReactComposerTopicFeedsTaggerActionType').SET_DARK_LAUNCH});};h.prototype.setPhotoAutoTaggingDelay=function(i,j){'use strict';c('ReactComposerDispatcher').dispatch({composerID:i,delay:j,type:c('ReactComposerTopicFeedsTaggerActionType').SET_PHOTO_AUTO_TAGGING_DELAY});};h.prototype.setPhotoPollingDuration=function(i,j){'use strict';c('ReactComposerDispatcher').dispatch({composerID:i,duration:j,type:c('ReactComposerTopicFeedsTaggerActionType').SET_PHOTO_POLLING_DURATION});};h.prototype.setPhotoPollingInterval=function(i,j){'use strict';c('ReactComposerDispatcher').dispatch({composerID:i,interval:j,type:c('ReactComposerTopicFeedsTaggerActionType').SET_PHOTO_POLLING_INTERVAL});};h.prototype.setTaggerMounted=function(i,j){'use strict';c('ReactComposerDispatcher').dispatch({composerID:i,isMounted:j,type:c('ReactComposerTopicFeedsTaggerActionType').SET_TAGGER_MOUNTED});};h.prototype.setTextAutoTaggingDelay=function(i,j){'use strict';c('ReactComposerDispatcher').dispatch({composerID:i,delay:j,type:c('ReactComposerTopicFeedsTaggerActionType').SET_TEXT_AUTO_TAGGING_DELAY});};h.prototype.updateTags=function(i,j){'use strict';c('ReactComposerDispatcher').dispatch({composerID:i,topics:j,type:c('ReactComposerTopicFeedsTaggerActionType').SERVER_UPDATE_TAGS});};h.prototype.prefillTags=function(i,j){'use strict';c('ReactComposerDispatcher').dispatch({composerID:i,topicIDs:j,type:c('ReactComposerTopicFeedsTaggerActionType').PREFILL_TAGS});};h.prototype.setComposerFeedID=function(i,j){'use strict';c('ReactComposerDispatcher').dispatch({composerID:i,composerFeedID:j,type:c('ReactComposerTopicFeedsTaggerActionType').SET_COMPOSER_FEED_ID});};h.prototype.setReshareURL=function(i,j){'use strict';c('ReactComposerDispatcher').dispatch({composerID:i,reshareURL:j,type:c('ReactComposerTopicFeedsTaggerActionType').SET_RESHARE_URL});};h.prototype.setTargetID=function(i,j){'use strict';c('ReactComposerDispatcher').dispatch({composerID:i,targetID:j,type:c('ReactComposerTopicFeedsTaggerActionType').SET_TARGET_ID});};function h(){'use strict';}f.exports=new h();}),null);
__d("XFeedTopicClassifierController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/feed\/topic\/classifier\/",{message:{type:"String",defaultValue:""},place_tag_id:{type:"FBID"},photo_ids:{type:"FBIDVector"},captions:{type:"StringVector"},urls:{type:"StringVector"},session_id:{type:"String"},tagged_profile_ids:{type:"FBIDVector"},mention_ids:{type:"FBIDVector"},mentions:{type:"HackType"},minutiae_action_id:{type:"FBID"},minutiae_object_id:{type:"FBID"},minutiae_object_string:{type:"String"},target_ent_id:{type:"FBID"},topics:{type:"HackType"},use_new_form:{type:"Bool",defaultValue:false},classification_session_id:{type:"String"},sequence_number:{type:"Int"}});}),null);
__d('ReactComposerTopicFeedsAutoTaggingRequester',['AsyncRequest','ReactComposerLoggingStore','ReactComposerMediaUploadType','ReactComposerMediaUploadStore','ReactComposerScrapedAttachmentStore','ReactComposerStatusStore','ReactComposerTaggerStore','ReactComposerTaggerType','ReactComposerTopicFeedsTaggerActions','ReactComposerTopicFeedsTaggerStore','DraftEntity','EditorState','Map','TopicFeedsComposerTypedLogger','XFeedTopicClassifierController','emptyFunction','uuid'],(function a(b,c,d,e,f,g){var h=5000;function i(){'use strict';this.$ReactComposerTopicFeedsAutoTaggingRequester1=new (c('Map'))();this.$ReactComposerTopicFeedsAutoTaggingRequester2=new (c('Map'))();this.$ReactComposerTopicFeedsAutoTaggingRequester3=new (c('Map'))();this.$ReactComposerTopicFeedsAutoTaggingRequester4=Date.now();}i.prototype.sendThrottledRequest=function(j,k){'use strict';if(this.$ReactComposerTopicFeedsAutoTaggingRequester1.has(j))return;this.$ReactComposerTopicFeedsAutoTaggingRequester1.set(j,setTimeout(function(){this.sendImmediateRequest(j);this.$ReactComposerTopicFeedsAutoTaggingRequester1['delete'](j);}.bind(this),k||h));};i.prototype.sendPhotoPollingRequest=function(j,k,l){'use strict';this.$ReactComposerTopicFeedsAutoTaggingRequester5(j);var m=[];for(var n=l;n<=k;n+=l)m.push(setTimeout(function(){return this.sendImmediateRequest(j);}.bind(this),n));this.$ReactComposerTopicFeedsAutoTaggingRequester2.set(j,m);};i.prototype.$ReactComposerTopicFeedsAutoTaggingRequester5=function(j){'use strict';var k=this.$ReactComposerTopicFeedsAutoTaggingRequester2.get(j);if(k){k.forEach(function(l){clearTimeout(l);});this.$ReactComposerTopicFeedsAutoTaggingRequester2['delete'](j);}};i.prototype.sendImmediateRequest=function(j){'use strict';var k=c('ReactComposerStatusStore').getMessageText(j),l=c('ReactComposerTaggerStore').getTaggerData(j,c('ReactComposerTaggerType').LOCATION),m=l.place&&l.place.getUniqueID(),n=c('ReactComposerMediaUploadStore').getUploadsOfType(j,c('ReactComposerMediaUploadType').PHOTO).map(function(ca){return ca.photoID;}).toArray().filter(function(ca){return ca;}),o=null,p=c('ReactComposerTopicFeedsTaggerStore').getReshareURL(j);if(!p)p=c('ReactComposerScrapedAttachmentStore').getMarkup(j)&&c('ReactComposerScrapedAttachmentStore').getPermissiveMatch(j);if(p)o=[p];var q=this.$ReactComposerTopicFeedsAutoTaggingRequester6(c('ReactComposerStatusStore').getEditorState(j)),r=c('ReactComposerTaggerStore').getTaggerData(j,c('ReactComposerTaggerType').PEOPLE)||[],s=r.map(function(ca){return ca.getUniqueID();}),t=c('ReactComposerTaggerStore').getTaggerData(j,c('ReactComposerTaggerType').ACTIVITY),u=null,v=null,w=null;if(t&&t.action&&t.object){u=t.action.getUniqueID();if(isNaN(t.object.getUniqueID())){w=t.object.getUniqueID();}else v=t.object.getUniqueID();}var x=c('ReactComposerTopicFeedsTaggerStore').getNextPredictionSequenceNumber(j),y=c('ReactComposerTopicFeedsTaggerStore').getTargetID(j),z=c('uuid')(),aa=Date.now(),ba=c('XFeedTopicClassifierController').getURIBuilder().setString('message',k).setFBID('place_tag_id',m).setFBIDVector('photo_ids',n).setHackType('mentions',q).setFBIDVector('tagged_profile_ids',s).setStringVector('urls',o).setString('session_id',c('ReactComposerLoggingStore').getSessionID(j)).setFBID('minutiae_action_id',u).setFBID('minutiae_object_id',v).setString('minutiae_object_string',w).setFBID('target_ent_id',y).setHackType('topics',c('ReactComposerTopicFeedsTaggerStore').getComposerData(j).topicsInfoList.toArray()).setString('classification_session_id',z).setInt('sequence_number',x).getURI();new (c('AsyncRequest'))(ba).setHandler(function(ca){return this.$ReactComposerTopicFeedsAutoTaggingRequester7(ca,j,z,aa,x);}.bind(this)).send();new (c('TopicFeedsComposerTypedLogger'))().setEvent('topic_feeds_composer_predict_start').setComposerID(c('ReactComposerLoggingStore').getSessionID(j)).setClassifySessionID(z).setLinkAttachmentCount(o?o.length:0).setPhotoAttachmentCount(n?n.length:0).setSequenceNumber(x).setClientEventTimeMs(Date.now()).log();};i.prototype.clearAllPendingRequests=function(j){'use strict';if(!this.$ReactComposerTopicFeedsAutoTaggingRequester1.has(j))return;clearTimeout(this.$ReactComposerTopicFeedsAutoTaggingRequester1.get(j));this.$ReactComposerTopicFeedsAutoTaggingRequester5(j);this.$ReactComposerTopicFeedsAutoTaggingRequester1['delete'](j);this.$ReactComposerTopicFeedsAutoTaggingRequester4=Date.now();};i.prototype.updatePostStatus=function(j,k){'use strict';this.$ReactComposerTopicFeedsAutoTaggingRequester3.set(j,k);};i.prototype.$ReactComposerTopicFeedsAutoTaggingRequester7=function(j,k,l,m,n){'use strict';if(!j||!j.payload){new (c('TopicFeedsComposerTypedLogger'))().setEvent('topic_feeds_composer_predict_finish').setComposerID(c('ReactComposerLoggingStore').getSessionID(k)).setClassifySessionID(l).setPredictionDuration(Date.now()-m).setPredictionIsSuccessful(false).setPredictionErrorReason(j?'No data':'No payload').setSequenceNumber(n).setClientEventTimeMs(Date.now()).setIsPredictionApplied(false).log();return;}var o=null,p=true;if(this.$ReactComposerTopicFeedsAutoTaggingRequester3.get(k)){p=false;o='This post has already been submitted.';}else if(m<this.$ReactComposerTopicFeedsAutoTaggingRequester4){p=false;o='Classify start time < Last Request Timestamp';}new (c('TopicFeedsComposerTypedLogger'))().setEvent('topic_feeds_composer_predict_finish').setComposerID(c('ReactComposerLoggingStore').getSessionID(k)).setClassifySessionID(l).setTopicsAutoTagged(j.payload.map(function(q){return q.feed_id;})).setPredictionDuration(Date.now()-m).setPredictionIsSuccessful(true).setPredictionCount(j.payload.length).setSequenceNumber(n).setClientEventTimeMs(Date.now()).setIsPredictionApplied(p).setPredictionErrorReason(o).log();if(p){this.$ReactComposerTopicFeedsAutoTaggingRequester4=m;c('ReactComposerTopicFeedsTaggerActions').updateTags(k,j.payload);}};i.prototype.$ReactComposerTopicFeedsAutoTaggingRequester6=function(j){'use strict';if(!j)return [];var k=j.getCurrentContent(),l=[];k.getBlockMap().forEach(function(m){m.findEntityRanges(c('emptyFunction').thatReturnsTrue,function(n,o){var p=m.getEntityAt(n);if(!p)return;var q=c('DraftEntity').get(p);if(q.getType()!=='MENTION')return;l.push({mention_id:q.getData().id,mention_type:q.getData().type,offset:n,length:o-n});});});return l;};f.exports=new i();}),null);
__d('ReactComposerTopicFeedsTaggerStore',['invariant','ReactComposerActionTypes','ReactComposerDispatcher','ReactComposerMediaUploadActionType','ReactComposerMediaUploadStore','ReactComposerScrapedAttachmentActionType','ReactComposerStatusActionType','ReactComposerStoreBase','ReactComposerTaggerActionType','ReactComposerTaggerType','ReactComposerTopicFeedsTaggerActionType','ReactComposerTopicFeedsAutoTaggingRequester','immutable','TopicFeedsConstant'],(function a(b,c,d,e,f,g,h){var i,j,k=c('TopicFeedsConstant').DEFAULT_PHOTO_AUTO_TAGGING_DELAY,l=c('TopicFeedsConstant').DEFAULT_PHOTO_POLLING_DURATION,m=c('TopicFeedsConstant').DEFAULT_PHOTO_POLLING_INTERVAL,n=c('TopicFeedsConstant').DEFAULT_TEXT_AUTO_TAGGING_DELAY,o=c('TopicFeedsConstant').TOPIC_CONFIDENCE_USER_ADD,p=c('TopicFeedsConstant').TOPIC_CONFIDENCE_USER_REMOVE,q=c('TopicFeedsConstant').TOPIC_CONFIDENCE_BOOTSTRAP;i=babelHelpers.inherits(r,c('ReactComposerStoreBase'));j=i&&i.prototype;function r(){'use strict';var s=void 0;j.constructor.call(this,function(){return {autoTaggingEnabled:true,photoAutoTaggingDelay:k,photoPollingDuration:l,photoPollingInterval:m,reshareURL:null,sequenceCounter:0,topicsInfoList:c('immutable').List(),taggerEnabled:false,targetID:null,textAutoTaggingDelay:n};},function(t){if(!s)return;var u=s.validateAction(t,'composerID');if(!s.getIsTaggerEnabled(u)&&!s.$ReactComposerTopicFeedsTaggerStore1(t))return;switch(t.type){case c('ReactComposerTopicFeedsTaggerActionType').SET_TAGGER_MOUNTED:s.$ReactComposerTopicFeedsTaggerStore2(t);break;case c('ReactComposerTopicFeedsTaggerActionType').USER_ADD_TAG:s.$ReactComposerTopicFeedsTaggerStore3(t);break;case c('ReactComposerTopicFeedsTaggerActionType').USER_REMOVE_TAG:s.$ReactComposerTopicFeedsTaggerStore4(t);break;case c('ReactComposerTopicFeedsTaggerActionType').SERVER_UPDATE_TAGS:s.$ReactComposerTopicFeedsTaggerStore5(t);break;case c('ReactComposerTopicFeedsTaggerActionType').PREFILL_TAGS:s.$ReactComposerTopicFeedsTaggerStore6(t);break;case c('ReactComposerStatusActionType').SET_EDITOR_STATE:s.$ReactComposerTopicFeedsTaggerStore7(t);break;case c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_DONE:c('ReactComposerDispatcher').waitFor([c('ReactComposerMediaUploadStore').getDispatchToken()]);s.$ReactComposerTopicFeedsTaggerStore8(t);break;case c('ReactComposerActionTypes').POST_STARTED:s.$ReactComposerTopicFeedsTaggerStore9(t);break;case c('ReactComposerActionTypes').POST_ERROR:s.$ReactComposerTopicFeedsTaggerStore10(t);break;case c('ReactComposerTopicFeedsTaggerActionType').SET_COMPOSER_FEED_ID:s.$ReactComposerTopicFeedsTaggerStore11(t);break;case c('ReactComposerTopicFeedsTaggerActionType').SET_TEXT_AUTO_TAGGING_DELAY:s.$ReactComposerTopicFeedsTaggerStore12(t);break;case c('ReactComposerTopicFeedsTaggerActionType').SET_PHOTO_AUTO_TAGGING_DELAY:s.$ReactComposerTopicFeedsTaggerStore13(t);break;case c('ReactComposerTopicFeedsTaggerActionType').SET_PHOTO_POLLING_DURATION:s.$ReactComposerTopicFeedsTaggerStore14(t);break;case c('ReactComposerTopicFeedsTaggerActionType').SET_PHOTO_POLLING_INTERVAL:s.$ReactComposerTopicFeedsTaggerStore15(t);break;case c('ReactComposerTopicFeedsTaggerActionType').SET_DARK_LAUNCH:s.$ReactComposerTopicFeedsTaggerStore16(t);break;case c('ReactComposerTaggerActionType').SET_TAGGER_DATA:s.$ReactComposerTopicFeedsTaggerStore17(t);break;case c('ReactComposerTopicFeedsTaggerActionType').SET_RESHARE_URL:s.$ReactComposerTopicFeedsTaggerStore18(t);break;case c('ReactComposerTopicFeedsTaggerActionType').SET_TARGET_ID:s.$ReactComposerTopicFeedsTaggerStore19(t);break;case c('ReactComposerScrapedAttachmentActionType').ATTACHMENT_SCRAPED:s.$ReactComposerTopicFeedsTaggerStore20(t);break;}});s=this;}r.prototype.getComposerFeedID=function(s){'use strict';return this.getComposerData(s).composerFeedID;};r.prototype.getUserAddedTopics=function(s){'use strict';return this.getComposerData(s).topicsInfoList.filter(function(t){return t.confidence===o;}).map(function(t){return t.feed_id;});};r.prototype.getUserRemovedTopics=function(s){'use strict';return this.getComposerData(s).topicsInfoList.filter(function(t){return t.confidence===p;}).map(function(t){return t.feed_id;});};r.prototype.getTaggedTopics=function(s){'use strict';return this.getComposerData(s).topicsInfoList.filter(function(t){return t.confidence>0;}).map(function(t){return t.feed_id;});};r.prototype.getIsTaggerEnabled=function(s){'use strict';return this.getComposerData(s).taggerEnabled;};r.prototype.getIsDarkLaunch=function(s){'use strict';return this.getComposerData(s).isDarkLaunch;};r.prototype.getReshareURL=function(s){'use strict';return this.getComposerData(s).reshareURL;};r.prototype.getTargetID=function(s){'use strict';return this.getComposerData(s).targetID;};r.prototype.getNextPredictionSequenceNumber=function(s){'use strict';return ++this.getComposerData(s).sequenceCounter;};r.prototype.$ReactComposerTopicFeedsTaggerStore1=function(s){'use strict';return s.type===c('ReactComposerTopicFeedsTaggerActionType').SET_TAGGER_MOUNTED||s.type===c('ReactComposerTopicFeedsTaggerActionType').PREFILL_TAGS;};r.prototype.$ReactComposerTopicFeedsTaggerStore2=function(s){'use strict';var t=this.validateAction(s,['composerID','isMounted']),u=t[0],v=t[1],w=this.getComposerData(u);w.taggerEnabled=v;};r.prototype.$ReactComposerTopicFeedsTaggerStore3=function(s){'use strict';var t=this.validateAction(s,['composerID','topicID']),u=t[0],v=t[1],w=this.getComposerData(u),x={feed_id:v,confidence:o,context:''},y=w.topicsInfoList.findIndex(function(aa){return aa.feed_id===v;});if(y>=0){var z=w.topicsInfoList.get(y);z.confidence===p||h(0);x.context=z.context;w.topicsInfoList=w.topicsInfoList['delete'](y);}w.topicsInfoList=w.topicsInfoList.push(x);w.autoTaggingEnabled=false;c('ReactComposerTopicFeedsAutoTaggingRequester').clearAllPendingRequests(u);this.emitChange(u);};r.prototype.$ReactComposerTopicFeedsTaggerStore4=function(s){'use strict';var t=this.validateAction(s,['composerID','topicID']),u=t[0],v=t[1],w=this.getComposerData(u),x=w.topicsInfoList.findIndex(function(z){return z.feed_id===v;});x>=0||h(0);var y={feed_id:v,confidence:p,context:w.topicsInfoList.get(x).context};w.topicsInfoList=w.topicsInfoList['delete'](x);w.topicsInfoList=w.topicsInfoList.push(y);c('ReactComposerTopicFeedsAutoTaggingRequester').clearAllPendingRequests(u);c('ReactComposerTopicFeedsAutoTaggingRequester').sendImmediateRequest(u);w.autoTaggingEnabled=false;this.emitChange(u);};r.prototype.$ReactComposerTopicFeedsTaggerStore5=function(s){'use strict';var t=this.validateAction(s,['composerID','topics']),u=t[0],v=t[1],w=this.getComposerData(u);if(w.autoTaggingEnabled){w.topicsInfoList=c('immutable').List(v);this.emitChange(u);}};r.prototype.$ReactComposerTopicFeedsTaggerStore6=function(s){'use strict';var t=this.validateAction(s,['composerID','topicIDs']),u=t[0],v=t[1],w=this.getComposerData(u);w.topicsInfoList=c('immutable').List(v.map(function(x){return {feed_id:x,confidence:q,context:''};}));this.emitChange(u);};r.prototype.$ReactComposerTopicFeedsTaggerStore7=function(s){'use strict';var t=this.validateAction(s,['composerID','editorState']),u=t[0],v=t[1];if(this.getComposerData(u).autoTaggingEnabled&&v.getCurrentContent().getPlainText().length>0)c('ReactComposerTopicFeedsAutoTaggingRequester').sendThrottledRequest(u,this.getComposerData(u).textAutoTaggingDelay);};r.prototype.$ReactComposerTopicFeedsTaggerStore11=function(s){'use strict';var t=this.validateAction(s,['composerID','composerFeedID']),u=t[0],v=t[1];this.getComposerData(u).composerFeedID=v;};r.prototype.$ReactComposerTopicFeedsTaggerStore8=function(s){'use strict';var t=this.validateAction(s,'composerID');if(this.getComposerData(t).autoTaggingEnabled)c('ReactComposerTopicFeedsAutoTaggingRequester').sendPhotoPollingRequest(t,this.getComposerData(t).photoPollingDuration,this.getComposerData(t).photoPollingInterval);};r.prototype.$ReactComposerTopicFeedsTaggerStore9=function(s){'use strict';var t=this.validateAction(s,'composerID');c('ReactComposerTopicFeedsAutoTaggingRequester').clearAllPendingRequests(t);c('ReactComposerTopicFeedsAutoTaggingRequester').updatePostStatus(t,true);this.getComposerData(t).autoTaggingEnabled=false;};r.prototype.$ReactComposerTopicFeedsTaggerStore10=function(s){'use strict';var t=this.validateAction(s,'composerID');this.getComposerData(t).autoTaggingEnabled=true;c('ReactComposerTopicFeedsAutoTaggingRequester').updatePostStatus(t,false);};r.prototype.$ReactComposerTopicFeedsTaggerStore12=function(s){'use strict';var t=this.validateAction(s,['composerID','delay']),u=t[0],v=t[1];this.getComposerData(u).textAutoTaggingDelay=v;};r.prototype.$ReactComposerTopicFeedsTaggerStore13=function(s){'use strict';var t=this.validateAction(s,['composerID','delay']),u=t[0],v=t[1];this.getComposerData(u).photoAutoTaggingDelay=v;};r.prototype.$ReactComposerTopicFeedsTaggerStore14=function(s){'use strict';var t=this.validateAction(s,['composerID','duration']),u=t[0],v=t[1];this.getComposerData(u).photoPollingDuration=v;};r.prototype.$ReactComposerTopicFeedsTaggerStore15=function(s){'use strict';var t=this.validateAction(s,['composerID','interval']),u=t[0],v=t[1];this.getComposerData(u).photoPollingInterval=v;};r.prototype.$ReactComposerTopicFeedsTaggerStore17=function(s){'use strict';var t=this.validateAction(s,['composerID','taggerID','taggerData']),u=t[0],v=t[1],w=t[2];if(v===c('ReactComposerTaggerType').ACTIVITY&&w.object||v===c('ReactComposerTaggerType').PEOPLE&&w.length>0||v===c('ReactComposerTaggerType').LOCATION&&w.place)c('ReactComposerTopicFeedsAutoTaggingRequester').sendImmediateRequest(u);};r.prototype.$ReactComposerTopicFeedsTaggerStore16=function(s){'use strict';var t=this.validateAction(s,['composerID','isDarkLaunch']),u=t[0],v=t[1];this.getComposerData(u).isDarkLaunch=v;};r.prototype.$ReactComposerTopicFeedsTaggerStore18=function(s){'use strict';var t=this.validateAction(s,['composerID','reshareURL']),u=t[0],v=t[1];this.getComposerData(u).reshareURL=v;c('ReactComposerTopicFeedsAutoTaggingRequester').sendImmediateRequest(u);};r.prototype.$ReactComposerTopicFeedsTaggerStore19=function(s){'use strict';var t=this.validateAction(s,['composerID','targetID']),u=t[0],v=t[1];this.getComposerData(u).targetID=v;};r.prototype.$ReactComposerTopicFeedsTaggerStore20=function(s){'use strict';var t=this.validateAction(s,'composerID');c('ReactComposerTopicFeedsAutoTaggingRequester').sendImmediateRequest(t);};f.exports=new r();}),null);
__d("XMeEndpointController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/me\/{*view}\/",{view:{type:"String",defaultValue:""}});}),null);
__d('ReactComposerMediaDialog.react',['cx','fbt','ReactComposerEvents','ReactComposerHandleUnsavedChanges','ReactComposerMediaUtils','Arbiter','DialogExpansion','DOMContainer.react','FBConfirmDialog.react','LayerFadeOnShow','ReactComponentWithPureRenderMixin','React','SubscriptionsHandler','XMeEndpointController','XUICloseButton.react','XUIDialog.react','XUIDialogBody.react','XUIDialogTitle.react','goURI','throttle'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('React').PropTypes,k=500,l=500,m=c('React').createClass({displayName:'ReactComposerMediaDialog',_subscriptions:c('SubscriptionsHandler'),mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{composerDOM:j.any.isRequired,composerID:j.string.isRequired,onDismiss:j.func.isRequired},getInitialState:function n(){return {shown:true,showConfirmDialog:false};},componentWillMount:function n(){this._subscriptions=new (c('SubscriptionsHandler'))();this._subscriptions.addSubscriptions(c('Arbiter').subscribe(c('ReactComposerEvents').POST_SUCCEEDED+this.props.composerID,c('throttle')(this._success,l)));},componentWillUnmount:function n(){this._subscriptions.release();},render:function n(){var o=this.state.showConfirmDialog?this._renderDismissConfirmation():null;return c('React').createElement('div',null,o,c('React').createElement(c('XUIDialog.react'),{behaviors:{DialogExpansion:c('DialogExpansion'),LayerFadeOnShow:c('LayerFadeOnShow')},className:"_51ly",shown:this.state.shown,width:k,layerHideOnBlur:false},c('React').createElement(c('XUIDialogTitle.react'),{showCloseButton:false},i._("Upload Photos\/Videos"),c('React').createElement(c('XUICloseButton.react'),{className:"_51-t",label:i._("Close"),onClick:this._showConfirmDialog})),c('React').createElement(c('XUIDialogBody.react'),{className:"_51lz"},c('React').createElement(c('DOMContainer.react'),null,this.props.composerDOM))));},_renderDismissConfirmation:function n(){return c('React').createElement(c('FBConfirmDialog.react'),{content:c('ReactComposerHandleUnsavedChanges').getUnsavedChangesMessage(this.props.composerID),onCancel:this._cancelDismiss,onConfirm:this._dismiss,onToggle:this._cancelDismiss,shown:true,title:i._("Discard Changes"),cancelButtonText:i._("No"),confirmButtonText:i._("Discard Changes")});},_showConfirmDialog:function n(){this.setState({showConfirmDialog:true});},_cancelDismiss:function n(){this.setState({showConfirmDialog:false});},_dismiss:function n(){this.setState({shown:false,showConfirmDialog:false});var o=c('ReactComposerMediaUtils').getVideoXUploader(this.props.composerID);o.cancelUploads();this.props.onDismiss&&this.props.onDismiss();},_success:function n(){this._dismiss();var o=c('XMeEndpointController').getURIBuilder().setString('view','timeline').getURI();c('goURI')(o);}});f.exports=m;}),null);
__d('ReactComposerTimelineStore',['ReactComposerActionStore','ReactComposerStore','ReactComposerAttachmentStore','ReactComposerAttachmentType','ReactComposerMediaConfig','ReactComposerPostUtils','PageTransitions','TimelineComposer','curry','formatDate'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('ReactComposerActionStore'));i=h&&h.prototype;function j(){'use strict';i.constructor.call(this);}j.prototype.__onPostStarted=function(k){'use strict';var l=c('ReactComposerAttachmentStore').getSelectedAttachmentID(k.composerID),m=c('ReactComposerStore').getScheduledPublishTime(k.composerID);if(m){var n=c('formatDate')(m,'m/d/Y',{skipPatternLocalization:true}),o=60*(60*m.getHours()+m.getMinutes()),p=m.getTime()/1000;k.config.contextInfo.scheduled=true;k.config.contextInfo.future_date=n;k.config.contextInfo.future_time=o;k.config.contextInfo.scheduled_publish_time=p;}c('ReactComposerPostUtils').post({actorID:k.actorID,composerConfig:k.config,composerID:k.composerID,targetID:k.targetID,onPostSuccess:c('curry')(this.__onPostSuccess,l)});};j.prototype.__onPostSuccess=function(k,l){'use strict';if(!k)return;var m=k===c('ReactComposerAttachmentType').LIFE_EVENT;if(m)c('PageTransitions').go(l.payload);};j.prototype.__canPost=function(k){'use strict';return !c('ReactComposerPostUtils').isPostButtonDisabled(k.composerID,c('ReactComposerMediaConfig').photo.limit);};j.prototype.__cleanup=function(k){'use strict';c('TimelineComposer').destroy();};f.exports=new j();}),null);
__d('ReactComposerTimelineMediaPostButtonContainer.react',['ReactComposerContextMixin','ReactComposerMediaPostButtonContainerMixin','ReactComposerTimelineStore','React'],(function a(b,c,d,e,f,g){var h=c('React').createClass({displayName:'ReactComposerTimelineMediaPostButtonContainer',mixins:[c('ReactComposerContextMixin'),c('ReactComposerMediaPostButtonContainerMixin')],componentDidMount:function i(){c('ReactComposerTimelineStore').registerComposerID(this.context.composerID);}});f.exports=h;}),null);
__d('ReactMediaComposer.react',['cx','ReactComposer.react','ReactComposerAttachmentActions','ReactComposerAttachmentType','ReactComposerBodyContainer.react','ReactComposerConfig','ReactComposerContextConfig','ReactComposerContextProviderMixin','ReactComposerEvents','ReactComposerMediaEagerAttachment.react','ReactComposerTimelineMediaPostButtonContainer.react','ReactComposerPrefillConfig','ReactComposerPrefillUtils','ReactComposerStatusEagerAttachment.react','Arbiter','React'],(function a(b,c,d,e,f,g,h){var i=c('React').createClass({displayName:'ReactMediaComposer',mixins:[c('ReactComposerContextProviderMixin')],propTypes:{contextConfig:c('ReactComposerContextConfig').isRequired,config:c('ReactComposerConfig').isRequired,prefillConfig:c('ReactComposerPrefillConfig').isRequired},componentWillMount:function j(){c('ReactComposerPrefillUtils').prefill(this.props.contextConfig.composerID,this.props.prefillConfig);},componentDidMount:function j(){var k=this.props.prefillConfig;if(k&&k.selectedAttachment){c('ReactComposerAttachmentActions').selectAttachment(this.props.contextConfig.composerID,k.selectedAttachment,k.shouldActivateSelectedAttachment);if(k.shouldActivateSelectedAttachment)c('Arbiter').inform(c('ReactComposerEvents').ACTIVATE_ATTACHMENT+this.props.contextConfig.composerID);}},render:function j(){var k=this.props.prefillConfig.selectedAttachment,l=this._getAttachments(k);return c('React').createElement(c('ReactComposer.react'),{className:"_1nby",loggingConfig:this.props.config.loggingConfig,activateOnInit:true,activateOnInitEntryPoint:this.props.config.triggeredFrom},c('React').createElement(c('ReactComposerBodyContainer.react'),{expanded:this.props.config.showExpandedComposer},l,this.props.children));},_getAttachments:function j(k){var l=[];l.push(c('React').createElement(c('ReactComposerStatusEagerAttachment.react'),{config:this.props.config,key:'status',prefillConfig:this.props.prefillConfig,postButtonModule:c('ReactComposerTimelineMediaPostButtonContainer.react'),selected:k===c('ReactComposerAttachmentType').STATUS,scrapeLinkOnInit:false}));l.push(c('React').createElement(c('ReactComposerMediaEagerAttachment.react'),{key:'media',config:this.props.config,prefillConfig:this.props.prefillConfig,postButtonModule:c('ReactComposerTimelineMediaPostButtonContainer.react'),selected:k===c('ReactComposerAttachmentType').MEDIA}));return l;}});f.exports=i;}),null);
__d('ReactMediaComposerInit',['AsyncRequest','Bootloader','ReactComposerMediaDialog.react','ReactComposerInit','ReactComposerAttachmentActions','ReactComposerAttachmentType','ReactComposerLoggingName','ReactComposerContextConfig','ReactComposerConfig','ReactComposerPrefillConfig','ReactMediaComposer.react','$','CSS','DOM','Event','FileInput','PUWMethods','React','ReactDOM','Run'],(function a(b,c,d,e,f,g){'use strict';var h={_composerDOM:null,_mountContainer:null,init:function i(j){this._composerDOM=c('DOM').create('div');this._mountContainer=c('DOM').create('div');var k=c('$')('timeline-medley'),l=j.contextConfig.composerID,m=c('DOM').scry(k,'input[name="composer_photo[]"]')[0],n=c('ReactComposerAttachmentType').STATUS;if(m){this._inputDOM=m;c('Event').listen(this._inputDOM,'change',function(){if(this._inputDOM.files&&this._inputDOM.files.length>0){this._uploadExistingFiles(this._inputDOM.files,l,j);c('ReactComposerAttachmentActions').selectAttachment(l,c('ReactComposerAttachmentType').MEDIA,true,c('ReactComposerLoggingName').MEDIA_COMPOSER_ON_INIT);}}.bind(this));if(m.files&&m.files.length>0){n=c('ReactComposerAttachmentType').MEDIA;this._uploadExistingFiles(m.files,l,j);}}j.prefillConfig={selectedAttachment:n,shouldActivateSelectedAttachment:true};c('ReactComposerInit').init(c('ReactMediaComposer.react'),j,this._composerDOM);c('ReactDOM').render(c('React').createElement(c('ReactComposerMediaDialog.react'),{composerDOM:this._composerDOM,composerID:l,onDismiss:this._cleanup.bind(this)}),this._mountContainer);c('DOM').appendContent(document.body,this._mountContainer);c('Run').onUnload(this._cleanup.bind(this));c('Run').onLeave(this._cleanup.bind(this));},_cleanup:function i(){setTimeout(function(){this._composerDOM&&c('ReactDOM').unmountComponentAtNode(this._composerDOM);this._mountContainer&&c('ReactDOM').unmountComponentAtNode(this._mountContainer);}.bind(this),0);},_uploadExistingFiles:function i(j,k,l){var m=l.config.attachmentsConfig[c('ReactComposerAttachmentType').MEDIA];c('Bootloader').loadModules(["ReactComposerMediaUtils","ReactComposerPhotoUploader"],function(n,o){return n.uploadPhotosOrVideo(k,Array.prototype.slice.call(j),new o(l.contextConfig,m.photoLimit,{disableFaceRecognition:m.disableFaceboxTagger}),l.config.targetData.targetSupportsMultiplePhotos,c('PUWMethods').FILE_SELECTOR,false);},'ReactMediaComposerInit');},setupFileUploadToComposerDialog:function i(j,k,l){var m=function n(o){c('CSS').conditionClass(j.getControl(),l,o);j.getInput().disabled=o;};j.subscribe('change',function(){new (c('AsyncRequest'))().setURI(k).setErrorHandler(function(){j.clear();m(false);}).setHandler(function(){m(false);}).send();m(true);});}};f.exports=h;}),null);