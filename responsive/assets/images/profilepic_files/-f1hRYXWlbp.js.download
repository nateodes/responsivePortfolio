if (self.CavalryLogger) { CavalryLogger.start_js(["AjWkN"]); }

__d('BuddyListNub',['csx','cx','fbt','Arbiter','AsyncRequest','AvailableList','BootloadedComponent.react','ChannelConnection','ChatOptions','ChatSidebarActions','ChatSidebarStore','ChatSidebarVisibility','ChatVisibility','CSS','Dock','DOM','Event','intlNumUtils','JSLogger','JSResource','KeyEventController','Keys','NubController','OrderedFriendsList','Parent','PresencePrivacy','PresenceStatus','PresenceUtil','React','ReactDOM','Run','SidebarType','Style','Toggler','emptyFunction'],(function a(b,c,d,e,f,g,h,i,j){var k,l,m=40,n=253,o='285px',p=c('JSLogger').create('buddylist_nub');k=babelHelpers.inherits(q,c('NubController'));l=k&&k.prototype;function q(r,s,t,u){'use strict';l.constructor.call(this);l.init.call(this,r);this.root=r;this.orderedList=s;this.button=c('DOM').find(r,'a.fbNubButton');this.unreadCount=c('DOM').find(r,"span._5ayx");this.label=c('DOM').find(r,'span.label');this.body=c('DOM').scry(r,'div.fbNubFlyoutBody')[0];this.container=c('Parent').bySelector(r,"._56ox");var v=c('DOM').find(r,'div.fbNubFlyoutTitlebar');c('Toggler').createInstance(v).setSticky(false);c('Toggler').createInstance(r).setSticky(true);if(u)c('Run').onAfterLoad(function(){this.dropdown=c('ReactDOM').render(c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('span',null),bootloadLoader:c('JSResource')('ChatSidebarDropdown.react').__setRef('BuddyListNub'),onToggleSidebar:function w(){},sidebarType:c('SidebarType').BUDDYLIST}),u);}.bind(this));s.subscribeOnce('render',this.flyoutContentChanged.bind(this));c('Run').onAfterLoad(function(){var w=c('DOM').find(v,"div._4k48");if(w)c('ReactDOM').render(c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('span',null),bootloadLoader:c('JSResource')('ChatSidebarComposeLink.react').__setRef('BuddyListNub'),className:"_3a-4"}),w);var x=c('DOM').find(this.button,"div._1us9");if(x)c('ReactDOM').render(c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('span',null),bootloadLoader:c('JSResource')('ChatSidebarComposeLink.react').__setRef('BuddyListNub'),className:"_3a-4"}),x);var y=c('DOM').find(this.button,"div._1usa");if(y)c('ReactDOM').render(c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('span',null),bootloadLoader:c('JSResource')('ChatSidebarDropdown.react').__setRef('BuddyListNub'),onToggleSidebar:function z(){},sidebarType:c('SidebarType').BUDDYLIST_NUB}),y);}.bind(this));s.setScrollContainer(this.body);c('AvailableList').subscribe('buddylist/availability-changed',this._updateCount.bind(this));c('Arbiter').subscribe('chat/connect',function(){return this._handleConnect(true);}.bind(this));c('Arbiter').subscribe('chat/option-changed',function(w,x){if(x.name=='hide_groups'){this.onResize();}else if(x.name==='hide_buddylist')x.value?this.hide():this.show();}.bind(this));c('ChannelConnection').subscribe(c('ChannelConnection').CONNECTED,function(){return this._updateView();}.bind(this));c('ChannelConnection').subscribe(c('ChannelConnection').SHUTDOWN,function(){return this._updateView();}.bind(this));c('ChannelConnection').subscribe(c('ChannelConnection').RECONNECTING,function(){return this._updateView();}.bind(this));c('ChannelConnection').subscribe([c('ChannelConnection').MUTE_WARNING,c('ChannelConnection').UNMUTE_WARNING],function(){return this._updateView();}.bind(this));this.subscribe('show',this.onShow.bind(this));this.subscribe('hide',this.onHide.bind(this));this.subscribe('resize',this.onResize.bind(this));c('Event').listen(r,'keydown',this._onKeyDown.bind(this));c('Event').listen(this.button,'click',this.onButtonClick.bind(this));c('KeyEventController').registerKey('q',function(event){if(!this._isOpen){this.onButtonClick();this.show();}event.prevent();}.bind(this));c('Arbiter').subscribe('minisidebar/show',this.hide.bind(this));c('Arbiter').subscribe('sidebar/visibility',function(w,x){if(x){this.hide();}else this._onSidebarHide();}.bind(this));c('Style').set(this.body,'min-height',o);c('Arbiter').subscribe('sidebar/typeahead/active',function(w,x){if(x){this._typeaheadActive=true;c('CSS').hide(this.body.parentNode);this.orderedList.hide();this.onResize();}else{this._typeaheadActive=false;this.onResize();c('CSS').show(this.body.parentNode);this.orderedList.show();}}.bind(this));c('OrderedFriendsList').getList(function(w){if(c('ChatSidebarStore').isEnabled()&&c('ChatSidebarStore').getVisibleType()===c('SidebarType').BUDDYLIST&&!c('ChatOptions').getSetting('hide_buddylist')&&!c('ChannelConnection').disconnected()&&!c('PresencePrivacy').isUserOffline()&&w.length>0)this.show();c('Event').listen(v,'click',function(x){if(c('CSS').matchesSelector(x.target,".titlebarTextWrapper"))this._syncHideBuddylist(true);}.bind(this));this._updateView();p.log('buddylist_initialized');}.bind(this));}q.prototype._handleVisibilityChange=function(){'use strict';this._updateView();if(!c('ChatVisibility').isOnline())this.hide();};q.prototype._updateView=function(r){'use strict';var s,t;if(!c('ChatVisibility').isOnline()){s=j._("{Chat} (Off)",[j.param('Chat',j._("Chat"))]);}else if(c('ChannelConnection').disconnected()){s=j._("{Chat} (Disconnected)",[j.param('Chat',j._("Chat"))]);}else{var u=c('PresenceStatus').getOnlineCount();if(u){var v=c('DOM').create('span',{className:'count'},'('+c('intlNumUtils').formatNumberWithThousandDelimiters(u)+')');s=j._({"*":"{Chat} {number-available}"},[j.param('Chat',j._("Chat")),j.param('number-available',v,[0,u])]);}else{s=j._("Chat");t=true;}}this._setPresenceIcon();this._setUnread();this._setLabel(s,t);this.buttonContentChanged();};q.prototype._setPresenceIcon=function(){'use strict';c('CSS').conditionClass(this.root,'offline',!c('ChatVisibility').isOnline()||c('ChannelConnection').disconnected());};q.prototype.onButtonClick=function(){'use strict';if(!c('ChatSidebarStore').isInitialized())return true;c('ChatSidebarVisibility').shouldShowSidebarIgnoreEnabled(null,function(r,s){var t=c('ChatSidebarStore').isEnabled();if(!t&&r){c('ChatSidebarActions').enable(c('SidebarType').SIDEBAR);}else c('ChatSidebarActions').show(t&&r?c('SidebarType').SIDEBAR:c('SidebarType').BUDDYLIST);});};q.prototype.onHide=function(){'use strict';this._isOpen=false;if(this._buddyListRenderSubscription){this.orderedList.unsubscribe(this._buddyListRenderSubscription);this._buddyListRenderSubscription=null;}this._hideBuddyList();c('Arbiter').inform('buddylist/hide');};q.prototype._onKeyDown=function(event){'use strict';var r=c('Event').getKeyCode(event);if(r===c('Keys').ESC&&!c('CSS').hasClass(this.root,'menuOpened')){this.hide();return false;}else if(r==c('Keys').RETURN)c('ChatSidebarVisibility').shouldShowSidebarIgnoreEnabled(null,function(s,t){c('ChatSidebarActions').enable(s?c('SidebarType').SIDEBAR:c('SidebarType').BUDDYLIST);});};q.prototype._onSidebarHide=function(event){'use strict';c('OrderedFriendsList').getList(function(r){if(c('ChatSidebarStore').isEnabled()&&!c('ChatOptions').getSetting('hide_buddylist')&&!c('ChannelConnection').disconnected()&&!c('PresencePrivacy').isUserOffline()&&r.lenth>0){this.show();}else this.hide();}.bind(this));};q.prototype.onResize=function(){'use strict';var r=!this._typeaheadActive?n:c('Dock').getMaxFlyoutHeight(this.root)-60;c('Arbiter').inform('buddyList/resized',r,c('Arbiter').BEHAVIOR_PERSISTENT);if(this._typeaheadActive){c('Style').set(this.body,'max-height','none');}else c('Style').set(this.body,'max-height',o);var s=Math.max(250,r),t=Math.floor(s/m);this.orderedList.setNumTopFriends(t);};q.prototype._showBuddyList=function(){'use strict';this._buddyListRenderSubscription=this.orderedList.subscribe('render',function(){if(c('Style').get(this.body,'height')!=o)c('Style').set(this.body,'height',o);}.bind(this));this.orderedList.show();p.bump('buddylist_show');};q.prototype._hideBuddyList=function(){'use strict';this.orderedList.hide();p.bump('buddylist_hide');};q.prototype.onShow=function(){'use strict';this._isOpen=true;if(c('ChannelConnection').disconnected()){c('ChannelConnection').reconnect();this._showBuddyList();}else c('ChatVisibility').goOnline(this._showBuddyList.bind(this));this._syncHideBuddylist(false);};q.prototype._setLabel=function(r,s){'use strict';var t=this.label.textContent||this.label.innerText;if(t!==r){var u=this.label.cloneNode(true);c('DOM').setContent(u,r);c('DOM').replace(this.label,u);this.label=u;}this.throbber&&c('CSS').conditionShow(this.throbber,!!s);};q.prototype._setUnread=function(r){'use strict';c('CSS').conditionShow(this.unreadCount,!!r);};q.prototype._updateCount=function(){'use strict';this._updateView();};q.prototype._syncHideBuddylist=function(r){'use strict';c('ChatOptions').setSetting('hide_buddylist',r,'buddylist');new (c('AsyncRequest'))('/ajax/chat/settings.php').setHandler(c('emptyFunction')).setErrorHandler(c('emptyFunction')).setData({hide_buddylist:r,window_id:c('PresenceUtil').getSessionID()}).setAllowCrossPageTransition(true).send();};c('Arbiter').subscribe(c('JSLogger').DUMP_EVENT,function(r,s){s.buddylist_visible=c('ChatSidebarStore').getVisibleType()===c('SidebarType').BUDDYLIST;});f.exports=q;}),null);
__d('BuddyListNubLoader',['Arbiter','ChatOptions','ChatSidebarStore','KeyEventController','PresencePrivacy','JSResource','SidebarType','emptyFunction','ifRequired'],(function a(b,c,d,e,f,g){'use strict';function h(){return c('ChatSidebarStore').isEnabled()&&!c('ChatOptions').getSetting('hide_buddylist')&&!c('ifRequired')('ChannelConnection',function(j){return j.disconnected();})&&!c('PresencePrivacy').isUserOffline();}function i(j,k,l,m){this.$BuddyListNubLoader1=j;this.$BuddyListNubLoader2=k;this.$BuddyListNubLoader3=l;this.$BuddyListNubLoader4=m;this.$BuddyListNubLoader5=null;c('ifRequired')('ChatSidebar',c('emptyFunction'),function(){if(h()){this.show();}else this.load();}.bind(this));c('Arbiter').subscribe('chat/option-changed',function(n,o){if(this.$BuddyListNubLoader7())if(o.name==='hide_buddylist'&&!o.value)this.show();}.bind(this));c('KeyEventController').registerKey('q',function(event){if(this.$BuddyListNubLoader7()){this.show();event.prevent();}}.bind(this));c('ChatSidebarStore').addListener(function(){if(c('ChatSidebarStore').getVisibleType()===c('SidebarType').BUDDYLIST)if(h()){this.show();}else this.load();}.bind(this));if(c('ChatSidebarStore').getVisibleType()===c('SidebarType').BUDDYLIST)if(h()){this.show();}else this.load();}i.prototype.load=function(){if(!this.$BuddyListNubLoader6){this.$BuddyListNubLoader6=c('JSResource')('BuddyListNub').__setRef('BuddyListNubLoader').load();this.$BuddyListNubLoader6.done(function(j){this.$BuddyListNubLoader5=new j(this.$BuddyListNubLoader1,this.$BuddyListNubLoader2,this.$BuddyListNubLoader3,this.$BuddyListNubLoader4);}.bind(this));}return this.$BuddyListNubLoader6;};i.prototype.show=function(){return this.load().then(function(j){this.$BuddyListNubLoader5&&this.$BuddyListNubLoader5.onButtonClick();this.$BuddyListNubLoader5&&this.$BuddyListNubLoader5.show();}.bind(this));};i.prototype.$BuddyListNubLoader7=function(){return !this.$BuddyListNubLoader5&&!this.$BuddyListNubLoader6;};f.exports=i;}),null);
__d('ChatUnreadCount',['ChatDispatcher','ChatUnreadCountActionTypes','Map','MercuryIDs','MercurySingletonProvider','MercuryThreadInformer','MercuryThreads','MercuryUnreadState','isInFocusMode'],(function a(b,c,d,e,f,g){'use strict';h.getForFBID=function(j){return i.getForFBID(j);};h.get=function(){return i.get();};function h(j){this.$ChatUnreadCount1=j;this.$ChatUnreadCount2=c('MercuryThreadInformer').getForFBID(j);this.$ChatUnreadCount3=c('MercuryThreads').getForFBID(j);this.$ChatUnreadCount4=new (c('Map'))();this.$ChatUnreadCount5=c('MercuryUnreadState').getForFBID(j);this.setupSubscriptions();}h.prototype.getUnreadCountForUID=function(j){if(!j)return null;var k=c('MercuryIDs').getThreadIDFromUserID(j);if(!this.$ChatUnreadCount5.getIsThreadUnread(k)){this.$ChatUnreadCount4['delete'](j);return 0;}var l=this.$ChatUnreadCount3.getOrFetch(k),m=l&&l.unread_count;this.$ChatUnreadCount4.set(j,m);if(c('isInFocusMode')(k))return 0;return m;};h.prototype.setupSubscriptions=function(){this.$ChatUnreadCount2.subscribe('threads-updated',function(j,k){var l=Object.keys(k).some(function(m){var n=c('MercuryIDs').getUserIDFromThreadID(m);if(!n)return false;var o=this.getUnreadCountForUID(n),p=this.$ChatUnreadCount4.get(n)||0;return o!==p;}.bind(this));if(l)c('ChatDispatcher').dispatch({type:c('ChatUnreadCountActionTypes').COUNT_UPDATED});}.bind(this));this.$ChatUnreadCount2.subscribe('unread-updated',function(){return c('ChatDispatcher').dispatch({type:c('ChatUnreadCountActionTypes').COUNT_UPDATED});});};var i=new (c('MercurySingletonProvider'))(h);f.exports=h;}),null);
__d('ChatSidebarComposeLink.react',['fbt','ChatOpenTabEventLogger','FantaTabActions','Link.react','MercuryThreads','React','TooltipData'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('MercuryThreads').get();i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(m){j.constructor.call(this,m);}l.prototype.render=function(){var m=h._("New Message");return c('React').createElement(c('Link.react'),babelHelpers['extends']({className:this.props.className,href:'#',onClick:this.$ChatSidebarComposeLink1},c('TooltipData').propsFor(m,'below')));};l.prototype.$ChatSidebarComposeLink1=function(m){var n=k.createNewLocalThreadGenerateID();c('FantaTabActions').openTab(n);c('ChatOpenTabEventLogger').log('sidebar');m.preventDefault();};f.exports=l;}),null);
__d('MessengerSearchSource',['ChatSearchSource','MercuryConfig','MercuryIDs','MercuryParticipants','MercuryParticipantTypes','MercurySingletonProvider','MessengerEnvironment','MessengerTypeaheadUtils','SearchableEntry','emptyFunction','requireWeak'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=50,k=c('MessengerEnvironment').messengerui;h=babelHelpers.inherits(l,c('ChatSearchSource'));i=h&&h.prototype;l.getForFBID=function(n){return m.getForFBID(n);};l.get=function(){return m.get();};function l(n){i.constructor.call(this,{queryRequests:[{uri:'/ajax/mercury/composer_query.php'}]});this.$MessengerSearchSource1=[];this.$MessengerSearchSource2=n;}l.prototype.bootstrapImpl=function(n){c('requireWeak')('OrderedFriendsList',function(p){return p.getSearchableEntries(j,function(q){this.$MessengerSearchSource1=q;i.addLocalEntries.call(this,q);}.bind(this));}.bind(this));var o=c('MercuryIDs').getParticipantIDFromUserID(this.$MessengerSearchSource2);c('MercuryParticipants').get(o,function(p){i.addLocalEntries.call(this,[new (c('SearchableEntry'))({uniqueID:p.fbid?p.fbid.toString():p.id,title:p.name,type:c('MercuryParticipantTypes').FRIEND,photo:p.big_image_src||p.image_src,uri:p.href,auxiliaryData:{isMessengerUser:p.is_messenger_user}})]);}.bind(this));i.bootstrapImpl.call(this,c('emptyFunction'));n();};l.prototype.searchImpl=function(n,o,p){p=p||{};if(n===''&&p.showDefaultEntries){o(this.$MessengerSearchSource1,n);var q=p&&p.onQueryFinished;q&&q(n);return;}p.threadLimit=c('MercuryConfig').MaxThreadResults;i.searchImpl.call(this,n,this.$MessengerSearchSource3(o,p),p);};l.prototype.$MessengerSearchSource3=function(n,o){return k&&o&&o.showThreadSearchEntry?function(p,q){var r=c('MessengerTypeaheadUtils').getMessageSearchEntry(q);if(r){n([r].concat(p),q);}else n(p,q);}:n;};var m=new (c('MercurySingletonProvider'))(l);f.exports=l;}),null);
__d('MessengerSearchTypeahead.react',['cx','fbt','ix','AbstractTypeahead.react','Bootloader','Image.react','MercuryIDs','MercuryThreadIDMap','MercuryThreads','MercuryTypeaheadConstants','MercuryVanityIDMap','MessengerActions','MessengerSearchSource','React','TypeaheadNavigation'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('MercuryThreadIDMap').get(),n=c('MercuryThreads').get(),o=c('React').PropTypes,p=j("86933"),q=100,r=null,s=null;k=babelHelpers.inherits(t,c('React').PureComponent);l=k&&k.prototype;function t(){var v,w;for(var x=arguments.length,y=Array(x),z=0;z<x;z++)y[z]=arguments[z];return w=(v=l.constructor).call.apply(v,[this].concat(y)),u.call(this),w;}t.prototype.componentWillMount=function(){var v=function x(y,z,aa){var ba=y.indexOf(z),ca=ba==-1?y.length-1:ba-1;aa(ca==-1?y[y.length-1]:y[ca]);},w=function x(y,z,aa){var ba=y.indexOf(z)+1;aa(ba==y.length?y[0]:y[ba]);};v=c('TypeaheadNavigation').moveDown;w=c('TypeaheadNavigation').moveUp;this.$MessengerSearchTypeahead1=function(x){for(var y=arguments.length,z=Array(y>1?y-1:0),aa=1;aa<y;aa++)z[aa-1]=arguments[aa];return v.apply(undefined,[s.orderEntries(x,this.props.queryString)].concat(z));}.bind(this);this.$MessengerSearchTypeahead2=function(x){for(var y=arguments.length,z=Array(y>1?y-1:0),aa=1;aa<y;aa++)z[aa-1]=arguments[aa];return w.apply(undefined,[s.orderEntries(x,this.props.queryString)].concat(z));}.bind(this);};t.prototype.render=function(){var v=this.props.isFacebookChat?i._("Search"):i._("Search Messenger");return c('React').createElement('div',{className:"_3rh8"},c('React').createElement(c('AbstractTypeahead.react'),{autoHighlight:this.props.isFacebookChat,blurOnWindowBlur:false,className:"_5iwm"+(this.props.isFocused||!!this.props.queryString?' '+"_5iwn":'')+(' '+"_150g")+(this.props.hideResults?' '+"_1a03":''),disabled:this.props.hideResults,inputClassName:"_3rhb",navigation:{moveUp:this.$MessengerSearchTypeahead1,moveDown:this.$MessengerSearchTypeahead2},onBlur:this.props.onBlur,onChange:this.$MessengerSearchTypeahead3,onFocus:function(){var w;this.$MessengerSearchTypeahead4();(w=this.props).onFocus.apply(w,arguments);}.bind(this),onMouseOver:this.$MessengerSearchTypeahead4,onClick:this.$MessengerSearchTypeahead4,onSelectAttempt:this.$MessengerSearchTypeahead5,placeholder:v,presenter:{ViewRenderer:r,alwaysVisibleOnFocus:true,extraRendererProps:{className:"_11_d",hasHoverState:this.props.isFacebookChat,isLoading:this.state.isLoading,onScrollIntoView:this.props.onScrollIntoView,viewer:this.props.viewer},maxEntries:this.props.maxEntries||q,sortEntries:this.$MessengerSearchTypeahead6,useLayer:false},queryString:this.props.queryString,role:'search',searchSource:c('MessengerSearchSource').getForFBID(this.props.viewer),searchSourceOptions:{onQueryFinished:this.$MessengerSearchTypeahead7,onQueryStarted:this.$MessengerSearchTypeahead8,showDefaultEntries:!this.props.isFacebookChat,showThreadSearchEntry:!this.props.isFacebookChat&&!!this.props.queryString},selectOnTab:true,spellCheck:false,showEntriesOnFocus:!this.props.isFacebookChat}),c('React').createElement(c('Image.react'),{onMouseDown:this.props.onClear,className:(!this.props.queryString?"hidden_elem":'')+(' '+"_2xme"),src:p}));};t.propTypes={hideResults:o.bool,isFacebookChat:o.bool,isFocused:o.bool,maxEntries:o.number,onBlur:o.func,onChange:o.func,onClear:o.func,onFocus:o.func,onSelect:o.func.isRequired,onScrollIntoView:o.func,queryString:o.string,viewer:o.string.isRequired};var u=function v(){this.state={isLoading:false,orderable:!!s};this.$MessengerSearchTypeahead3=function(){var w;this.setState({isLoaded:false});(w=this.props).onChange.apply(w,arguments);}.bind(this);this.$MessengerSearchTypeahead4=function(){if(!this.state.orderable)c('Bootloader').loadModules(["MessengerTypeaheadView.react","MessengerTypeaheadUtils"],function(w,x){r=w;s=x;this.setState({orderable:true});}.bind(this),'MessengerSearchTypeahead.react');}.bind(this);this.$MessengerSearchTypeahead8=function(w){if(w===this.props.queryString)this.setState({isLoading:true});}.bind(this);this.$MessengerSearchTypeahead7=function(w){if(w===this.props.queryString)this.setState({isLoading:false,isLoaded:true});}.bind(this);this.$MessengerSearchTypeahead6=function(w){return s?s.sortEntries(w,this.props.queryString):w;}.bind(this);this.$MessengerSearchTypeahead5=function(w){var x=w.getUniqueID(),y=w.getType(),z=w.getAuxiliaryData().alias;if(z)c('MercuryVanityIDMap').set(z,c('MercuryIDs').getParticipantIDFromUserID(x));if(y===c('MercuryTypeaheadConstants').SEARCH_TYPE){c('MessengerActions').changeQueryAll(this.props.queryString);}else if(y===c('MercuryTypeaheadConstants').THREAD_TYPE){m.getClientIDFromServerID(x,function(aa){this.props.onSelect(aa,y);}.bind(this));}else n.getThreadMeta(c('MercuryIDs').getThreadIDFromUserID(x),function(aa){this.props.onSelect(aa.thread_id,y);}.bind(this));}.bind(this);};f.exports=t;}),null);
__d('ChatTypeaheadWrapper.react',['cx','Arbiter','Bootloader','ChatConfig','ChatOpenTabEventLogger','ChatSidebarComposeLink.react','ChatSidebarSections','ChatSidebarSheet.react','ChatTypeaheadConstants','FantaTabActions','MessengerSearchTypeahead.react','React','Run','emptyFunction','getActiveElement'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=40,l=c('ChatConfig').get('divebar_rounded_profile',false);function m(o){c('Arbiter').inform('sidebar/typeahead/active',o);}i=babelHelpers.inherits(n,c('React').Component);j=i&&i.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=j.constructor).call.apply(o,[this].concat(r)),this.state={height:0,value:'',isSearching:false,dropdownComponent:null},p;}n.prototype.componentDidMount=function(){if(this.props.isSidebar){c('Arbiter').subscribe('sidebar/resized',function(o,p){this.setState({height:p});}.bind(this));c('Run').onAfterLoad(function(){c('Bootloader').loadModules(["ChatSidebarDropdown.react","SidebarType","ChatSidebarActions"],function(o,p,q){this.setState({dropdownComponent:c('React').createElement(o,{sidebarType:p.SIDEBAR,onToggleSidebar:q.disable})});}.bind(this),'ChatTypeaheadWrapper.react');}.bind(this));}else c('Arbiter').subscribe('buddyList/resized',function(o,p){this.setState({height:p});}.bind(this));};n.prototype.componentWillUpdate=function(o,p){if(p.isSearching!==this.state.isSearching)m(p.isSearching);};n.prototype.render=function(){var o=this.state.height!=null?Math.floor((this.state.height-k*2)/k):null;return c('React').createElement('div',{className:!l?"squareProfile":''},c('React').createElement(c('ChatSidebarSheet.react'),{className:'fbChatSidebarMessage'}),c('React').createElement(c('MessengerSearchTypeahead.react'),{isFacebookChat:true,isFocused:true,maxEntries:o,queryString:this.state.value,viewer:this.props.id,onBlur:function(){return this.setState({isSearching:false,value:''});}.bind(this),onChange:function(p){var q=p.target.value;this.setState({isSearching:q!=='',value:q});}.bind(this),onClear:c('emptyFunction'),onFocus:c('emptyFunction'),onScrollIntoView:c('emptyFunction'),onSelect:function(p,q){c('getActiveElement')().blur();if(q===c('ChatTypeaheadConstants').MEETING_ROOM_PAGE_TYPE){c('Bootloader').loadModules(["MercuryIDs","goURI"],function(r,s){this.setState({isSearching:false,value:''});var t=r.getUserIDFromThreadID(p);s('/'+t);}.bind(this),'ChatTypeaheadWrapper.react');}else{c('FantaTabActions').openTab(p,q);c('ChatOpenTabEventLogger').logByType(q,c('ChatSidebarSections').TYPEAHEAD,p);}}.bind(this)}),this.props.isSidebar?c('React').createElement('div',{className:"_531b"},this.state.dropdownComponent,c('React').createElement(c('ChatSidebarComposeLink.react'),{className:"_3a-4 _5q85"})):null);};f.exports=n;}),null);
__d('ChatTypeaheadCore',['ChatTypeaheadWrapper.react','React','ReactDOM'],(function a(b,c,d,e,f,g){'use strict';var h={init:function i(j,k,l){c('ReactDOM').render(c('React').createElement(c('ChatTypeaheadWrapper.react'),{id:k,isSidebar:l}),j);}};f.exports=h;}),null);
__d('FBPaymentsDialogContainerMount',['FBPaymentsDialogContainer.react','React','ReactDOM'],(function a(b,c,d,e,f,g){'use strict';var h={mount:function i(j){c('ReactDOM').render(c('React').createElement(c('FBPaymentsDialogContainer.react'),null),j);}};f.exports=h;}),null);
__d('GameroomDownloadButtonLabel.react',['ix','cx','fbt','Image.react','React','fbglyph'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k=function l(m){return c('React').createElement('span',{className:"_2k_9"},c('React').createElement(c('Image.react'),{className:"_2k_a",src:h("140445")}),c('React').createElement('span',null,m.useFreeDownloadText?j._("Free Install"):m.cta));};f.exports=k;}),null);
__d('GameroomDownloadButtonView.react',['cx','GameroomDownloadButtonLabel.react','React','XUIButton.react'],(function a(b,c,d,e,f,g,h){'use strict';var i=function j(k){var l=!!k.useFreeDownloadText,m=c('React').createElement(c('GameroomDownloadButtonLabel.react'),{cta:k.cta,useFreeDownloadText:l});return c('React').createElement(c('XUIButton.react'),{className:"_1y7f"+(' '+"_1siq")+(!k.canDownload?' '+"_30ik":''),disabled:!k.canDownload,href:k.uri,label:m,onClick:k.onClick,size:k.size,target:'_blank',use:'confirm'});};f.exports=i;}),null);
__d("XGameroomLandingPageController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/gameroom\/download\/",{app_id:{type:"FBID"},at:{type:"String"},fbsource:{type:"Int"},video_id:{type:"FBID"}});}),null);
__d('GameroomRedirectDownloadButton.react',['GameroomDownloadButtonView.react','React','XGameroomLandingPageController'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').PureComponent);i=h&&h.prototype;j.prototype.render=function(){var k=this.props.appID,l=c('XGameroomLandingPageController').getURIBuilder();if(this.props.appID)l.setFBID('app_id',k);l.setInt('fbsource',this.props.fbsource);var m=l.getURI().setDomain('www.facebook.com').setProtocol('https');return c('React').createElement(c('GameroomDownloadButtonView.react'),{canDownload:this.props.canDownload,cta:this.props.cta,onClick:undefined,size:this.props.size,uri:m,useFreeDownloadText:this.props.useFreeDownloadText});};function j(){h.apply(this,arguments);}j.defaultProps={useFreeDownloadText:false};f.exports=j;}),null);
__d('SidebarAppTickerResizer',['cx','Animation','Arbiter','AsyncRequest','ChatSidebarActions','ChatSidebarStore','ChatSidebarVisibility','CSS','debounce','Event','SidebarType','SimpleDrag','TickerController','$','queryThenMutateDOM'],(function a(b,c,d,e,f,g,h){var i=1e-7,j=1,k=85,l=171,m=165,n=300,o=46,p=90,q=82,r=150;function s(t,u,v,w,x){'use strict';this.$SidebarAppTickerResizer1=c('$')('pagelet_ticker');this.$SidebarAppTickerResizer2=c('$')('pagelet_canvas_nav_content');this.$SidebarAppTickerResizer3=this.$SidebarAppTickerResizer1.parentNode;this.$SidebarAppTickerResizer4=w;this.$SidebarAppTickerResizer5=x;var y=parseInt(v,10);if(!isNaN(y)){if(y>k)if(y!=this.$SidebarAppTickerResizer6())v=this.$SidebarAppTickerResizer6()+'px';this.$SidebarAppTickerResizer7(y);}this.$SidebarAppTickerResizer2.style.height=v;this.$SidebarAppTickerResizer8(t,u);if(v===null)c('Arbiter').subscribe('AppsDivebar/show-apps',this.$SidebarAppTickerResizer9.bind(this));if(!w){this.$SidebarAppTickerResizer10();c('CSS').hide(t);}c('Arbiter').subscribe('ChatSidebarDropdown/closeTicker',this.$SidebarAppTickerResizer10.bind(this));c('Arbiter').subscribe('ChatSidebarDropdown/openTicker',this.$SidebarAppTickerResizer11.bind(this));c('Arbiter').subscribe('sidebar/visibility',function(z,aa){if(aa)this.$SidebarAppTickerResizer12();}.bind(this));this.$SidebarAppTickerResizer13=c('debounce')(this.$SidebarAppTickerResizer9.bind(this),200);c('Event').listen(window,'resize',this.$SidebarAppTickerResizer13);c('Arbiter').inform('Ticker/resized');}s.prototype.$SidebarAppTickerResizer12=function(){'use strict';var t=Math.round(parseFloat(this.$SidebarAppTickerResizer1.style.height));if(t<=i)return;c('TickerController').show(this.$SidebarAppTickerResizer1);};s.prototype.$SidebarAppTickerResizer9=function(t){'use strict';c('queryThenMutateDOM')(function(){this.$SidebarAppTickerResizer14();}.bind(this),function(){var u=Math.round(parseFloat(this.$SidebarAppTickerResizer1.style.height));if(u>Math.round(this.$SidebarAppTickerResizer15())||this.$SidebarAppTickerResizer16&&this.$SidebarAppTickerResizer16>j){var v=this.$SidebarAppTickerResizer16/this.$SidebarAppTickerResizer17*100,w=this.$SidebarAppTickerResizer18(0,this.$SidebarAppTickerResizer15()-v);if(!(t&&t.type==='resize'))this.$SidebarAppTickerResizer19(w);c('ChatSidebarVisibility').shouldShowSidebar(null,function(x,y){c('ChatSidebarActions').show(x?c('SidebarType').SIDEBAR:c('SidebarType').BUDDYLIST);});}}.bind(this));};s.prototype.$SidebarAppTickerResizer15=function(){'use strict';if(!this.$SidebarAppTickerResizer4)return 0;if(c('ChatSidebarStore').getVisibleType()!==c('SidebarType').SIDEBAR)return p;return Math.min(p,(this.$SidebarAppTickerResizer17-this.$SidebarAppTickerResizer20-q)*100/this.$SidebarAppTickerResizer17);};s.prototype.$SidebarAppTickerResizer8=function(t,u){'use strict';var v=new (c('SimpleDrag'))(t);v.subscribe('start',this.$SidebarAppTickerResizer21.bind(this));v.subscribe(['update','end'],this.$SidebarAppTickerResizer22.bind(this));var w=new (c('SimpleDrag'))(u);w.subscribe('start',this.$SidebarAppTickerResizer21.bind(this));w.subscribe('update',this.$SidebarAppTickerResizer23.bind(this));w.subscribe('end',this.$SidebarAppTickerResizer24.bind(this));};s.prototype.$SidebarAppTickerResizer21=function(t,event){'use strict';this.$SidebarAppTickerResizer25=event.clientY;this.$SidebarAppTickerResizer14();this.$SidebarAppTickerResizer26();};s.prototype.$SidebarAppTickerResizer14=function(){'use strict';this.$SidebarAppTickerResizer20=this.$SidebarAppTickerResizer2.offsetTop;this.$SidebarAppTickerResizer27=this.$SidebarAppTickerResizer1.offsetHeight;this.$SidebarAppTickerResizer17=this.$SidebarAppTickerResizer3.offsetHeight;this.$SidebarAppTickerResizer16=this.$SidebarAppTickerResizer2.offsetHeight;this.$SidebarAppTickerResizer28=this.$SidebarAppTickerResizer16;};s.prototype.$SidebarAppTickerResizer26=function(){'use strict';c('CSS').addClass(this.$SidebarAppTickerResizer3,"_4vfq");};s.prototype.$SidebarAppTickerResizer29=function(){'use strict';c('CSS').removeClass(this.$SidebarAppTickerResizer3,"_4vfq");};s.prototype.$SidebarAppTickerResizer22=function(t,event){'use strict';var u=this.$SidebarAppTickerResizer16/this.$SidebarAppTickerResizer17*100,v=this.$SidebarAppTickerResizer18(event.clientY-this.$SidebarAppTickerResizer25,this.$SidebarAppTickerResizer15()-u);if(t=='end'){this.$SidebarAppTickerResizer29();this.$SidebarAppTickerResizer19(v);}c('ChatSidebarVisibility').shouldShowSidebar(null,function(w,x){c('ChatSidebarActions').show(w?c('SidebarType').SIDEBAR:c('SidebarType').BUDDYLIST);});};s.prototype.$SidebarAppTickerResizer23=function(t,event){'use strict';var u=-this.$SidebarAppTickerResizer16,v=this.$SidebarAppTickerResizer6()-this.$SidebarAppTickerResizer16,w=this.$SidebarAppTickerResizer30(event.clientY-this.$SidebarAppTickerResizer25,u,v);this.$SidebarAppTickerResizer18(-w,this.$SidebarAppTickerResizer15());this.$SidebarAppTickerResizer28=this.$SidebarAppTickerResizer16+w;this.$SidebarAppTickerResizer28=Math.max(j,this.$SidebarAppTickerResizer28);this.$SidebarAppTickerResizer2.style.height=this.$SidebarAppTickerResizer28+'px';};s.prototype.$SidebarAppTickerResizer24=function(t,event){'use strict';var u=this.$SidebarAppTickerResizer28,v=this.$SidebarAppTickerResizer31(this.$SidebarAppTickerResizer28);this.$SidebarAppTickerResizer7(v);var w=this.$SidebarAppTickerResizer18(this.$SidebarAppTickerResizer16-v,this.$SidebarAppTickerResizer15());if(this.$SidebarAppTickerResizer16!=v){this.$SidebarAppTickerResizer32(v);this.$SidebarAppTickerResizer19(w);}new (c('Animation'))(this.$SidebarAppTickerResizer2).from('height',u).to('height',v).duration(n).go();};s.prototype.$SidebarAppTickerResizer7=function(t){'use strict';if(!this.$SidebarAppTickerResizer5)return;var u="_3qrt",v=document.getElementsByClassName(u),w='';if(t==this.$SidebarAppTickerResizer33()){w='inline';}else w='';for(var x=0;x<v.length;x++)v[x].style.display=w;};s.prototype.$SidebarAppTickerResizer18=function(t,u){'use strict';var v=this.$SidebarAppTickerResizer27+t,w=v/this.$SidebarAppTickerResizer17*100;w=Math.max(i,Math.min(u,w));this.$SidebarAppTickerResizer1.style.height=w+'%';if(w!=i){c('CSS').removeClass(this.$SidebarAppTickerResizer1,'hidden_elem');this.$SidebarAppTickerResizer12();}return w;};s.prototype.$SidebarAppTickerResizer31=function(t){'use strict';var u=this.$SidebarAppTickerResizer33(),v=this.$SidebarAppTickerResizer6();return t<v-o?t<u-o?j:u:v;};s.prototype.$SidebarAppTickerResizer33=function(){'use strict';return k;};s.prototype.$SidebarAppTickerResizer6=function(){'use strict';if(this.$SidebarAppTickerResizer5){return m;}else return l;};s.prototype.$SidebarAppTickerResizer34=function(t){'use strict';var u=this.$SidebarAppTickerResizer6();return t<0?j:t>u?u:t;};s.prototype.$SidebarAppTickerResizer30=function(t,u,v){'use strict';return t<u?u:t>v?v:t;};s.prototype.$SidebarAppTickerResizer19=function(t){'use strict';new (c('AsyncRequest'))('/ajax/feed/ticker/resize').setData({height:''+t}).setMethod('POST').send();c('Arbiter').inform('Ticker/resized');};s.prototype.$SidebarAppTickerResizer32=function(t){'use strict';new (c('AsyncRequest'))('/ajax/feed/apps/resize').setData({height:''+t}).setMethod('POST').send();};s.prototype.$SidebarAppTickerResizer35=function(t){'use strict';var u=this.$SidebarAppTickerResizer27,v=this.$SidebarAppTickerResizer17*t/100;new (c('Animation'))(this.$SidebarAppTickerResizer1).from('height',u).to('height',v).duration(r).ondone(function(){this.$SidebarAppTickerResizer1.style.height=t+'%';this.$SidebarAppTickerResizer19(t===0?'0.0':t);c('ChatSidebarVisibility').shouldShowSidebar(null,function(w,x){c('ChatSidebarActions').show(w?c('SidebarType').SIDEBAR:c('SidebarType').BUDDYLIST);});}.bind(this)).go();};s.prototype.$SidebarAppTickerResizer10=function(){'use strict';this.$SidebarAppTickerResizer14();this.$SidebarAppTickerResizer35(0);};s.prototype.$SidebarAppTickerResizer11=function(){'use strict';this.$SidebarAppTickerResizer1.style.height='40px';c('TickerController').show(this.$SidebarAppTickerResizer1,function(){this.$SidebarAppTickerResizer14();var t=(this.$SidebarAppTickerResizer17-this.$SidebarAppTickerResizer20-q-this.$SidebarAppTickerResizer16)*50/this.$SidebarAppTickerResizer17;this.$SidebarAppTickerResizer35(t);}.bind(this));};f.exports=s;}),null);
__d('VideoCallTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:VideoCallLoggerConfig',this.$VideoCallTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:VideoCallLoggerConfig',this.$VideoCallTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$VideoCallTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$VideoCallTypedLogger1=babelHelpers['extends']({},this.$VideoCallTypedLogger1,j);return this;};h.prototype.setEvent=function(j){this.$VideoCallTypedLogger1.event=j;return this;};h.prototype.setMessage=function(j){this.$VideoCallTypedLogger1.message=j;return this;};var i={event:true,message:true};f.exports=h;}),null);
__d('DeviceBasedLoginWWWQP',['CSS','Event','tidyEvent'],(function a(b,c,d,e,f,g){'use strict';var h={swapWithShadowMessageOnClick:function i(j,k,l){c('tidyEvent')(c('Event').listen(j,'click',function(m){c('CSS').hide(k);c('CSS').show(l);}));}};f.exports=h;}),null);
__d('ChatVideoCallButton.react',['cx','fbt','invariant','Bootloader','FBID','FBRTCCallabilityStore','FBRTCCore','Keys','LayerFadeOnHide','Link.react','MercuryIDs','MercuryParticipants','MercuryThreadIDMap','ReactComponentWithPureRenderMixin','React','StoreAndPropBasedStateMixin','TrackingNodes','FBRTCLogger','VideoCallTypedLogger','XUIAmbientNUX.react'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k=c('MercuryThreadIDMap').get(),l=c('FBRTCLogger').Trigger,m=c('React').PropTypes,n={isCallable:false,shown:false,user:null},o=c('React').createClass({displayName:'ChatVideoCallButton',mixins:[c('ReactComponentWithPureRenderMixin'),c('StoreAndPropBasedStateMixin')(c('FBRTCCallabilityStore'),c('MercuryParticipants'))],propTypes:{isAudio:m.bool,isGroupChat:m.bool,onRTCNuxCloseButtonClick:m.func.isRequired,rtcNuxShown:m.bool.isRequired,threadID:m.string,viewer:m.string.isRequired,shown:m.bool,rtcCallData:m.object.isRequired},getDefaultProps:function p(){return {shown:true,rtcCallData:{call_state:'NO_ONGOING_CALL'}};},statics:{calculateState:function p(q){if(!q.threadID)return babelHelpers['extends']({},n);if(q.isGroupChat)return {isCallable:true,shown:q.shown,user:null};var r=c('MercuryIDs').getUserIDFromThreadID(q.threadID);if(r===q.viewer||!c('FBID').isUser(r))return babelHelpers['extends']({},n);r&&c('FBID').isUser(r)||j(0);var s=c('MercuryIDs').getParticipantIDFromUserID(r),t=c('MercuryParticipants').getOrFetch(s);return {isCallable:c('FBRTCCallabilityStore').isCallable(r),shown:q.shown,user:t};}},getTooltipLabel:function p(){if(this.props.isGroupChat)return this.props.isAudio?i._("Start a group call"):i._("Start a group video chat");var q=this.state.user;if(!q)return undefined;return this.props.isAudio?c('FBRTCCallabilityStore').voiceCallButtonTooltip(q.fbid,q.short_name):c('FBRTCCallabilityStore').callButtonTooltip(q.fbid,q.short_name);},render:function p(){if(!this.state.shown)return null;var q=c('TrackingNodes').getTrackingInfo(this.props.isAudio?c('TrackingNodes').types.VIDEOCHAT:c('TrackingNodes').types.VOICECHAT),r=JSON.stringify({videochat:'call_clicked_bhat_tab'});return c('React').createElement('div',null,c('React').createElement(c('Link.react'),{'aria-label':this.getTooltipLabel(),className:"button"+(' '+"_3olv")+(this.props.isAudio?' '+"_2fpc":'')+(!this.props.isAudio?' '+"_2fpd":'')+(this.state.isCallable?' '+"enabled":''),'data-ft':q,'data-gt':r,'data-hover':'tooltip','data-tooltip-content':this.getTooltipLabel(),'data-tooltip-position':'above',onClick:this._handleClick,onKeyUp:this._handleKeyUp,ref:'button'}),c('React').createElement(c('XUIAmbientNUX.react'),{alignment:'right',behaviors:{LayerFadeOnHide:c('LayerFadeOnHide')},contextRef:function(){return this.refs.button;}.bind(this),onCloseButtonClick:this.props.onRTCNuxCloseButtonClick,shown:this.props.rtcNuxShown,width:'auto'},i._("You can now make a group call.")));},_handleClick:function p(q){q.preventDefault();if(!this.state.isCallable)return;this.props.onRTCNuxCloseButtonClick();this._initiateCall();},_handleKeyUp:function p(q){q.preventDefault();if(q.keyCode!==c('Keys').RETURN||!this.state.isCallable)return;if(q.target){q.target instanceof HTMLElement||j(0);q.target.blur();}this._initiateCall();},_initiateCall:function p(){var q=this.props,r=q.isAudio,s=q.isGroupChat,t=q.threadID;!!t||j(0);var u=r?'audio':'video';if(s){if(c('MercuryIDs').isLocalThread(t)){k.getServerIDFromClientID(t,function(v){return this._initiateGroupCall(v);}.bind(this));}else this._initiateGroupCall(c('MercuryIDs').getThreadFBIDFromThreadID(t));}else{c('FBRTCCore').startOutgoingCall(this.state.user.fbid,u,r);new (c('VideoCallTypedLogger'))().setEvent('chat_tab_call_click').log();}},_initiateGroupCall:function p(q){var r=this.props,s=r.isAudio,t=r.rtcCallData,u=t.call_state,v=t.server_info_data;if(u!=='NO_ONGOING_CALL'&&v){c('FBRTCCore').startGroupCall({conferenceName:'GROUP:'+q,hasVideo:!s,serverInfoData:v,trigger:u!=='AUDIO_GROUP_CALL'?s?l.MULTIWAY_THREAD_HEADER_JOIN_AUDIO_CALL_AUDIO_BUTTON:l.MULTIWAY_THREAD_HEADER_JOIN_AUDIO_CALL_VIDEO_BUTTON:s?l.MULTIWAY_THREAD_HEADER_JOIN_VIDEO_CALL_AUDIO_BUTTON:l.MULTIWAY_THREAD_HEADER_JOIN_VIDEO_CALL_VIDEO_BUTTON});return;}c('Bootloader').loadModules(["FBRTCSupport","MessengerRTCGroupCallUnsupportedBrowserDialogController","MessengerRTCGroupCallParticipantsPickerDialogController","RTCGroupCallUtils"],function(w,x,y,z){if(!w.isGroupCallWebtrcSupported()){x.render({hasVideo:!this.props.isAudio});return;}z.getThread(q,function(aa,ba){y.render({participants:ba['delete'](c('MercuryIDs').getParticipantIDFromUserID(this.props.viewer)),thread:aa,viewerID:this.props.viewer,trigger:this.props.isAudio?l.MULTIWAY_THREAD_HEADER_AUDIO_BUTTON:l.MULTIWAY_THREAD_HEADER_VIDEO_BUTTON,conferenceName:'GROUP:'+q,hasVideo:!this.props.isAudio});}.bind(this));}.bind(this),'ChatVideoCallButton.react');}});f.exports=o;}),null);
__d('FantaTabMainPlaceholder.react',['cx','React','XUISpinner.react'],(function a(b,c,d,e,f,g,h){'use strict';var i=function j(){return c('React').createElement('div',{className:"_59v1"},c('React').createElement('div',{className:"_5qi9"+(' '+"_5qib")},c('React').createElement('div',{className:"_3_9e"+(' '+"_s0f")+(' '+"_50mz")+(' '+"_50m_")+(' '+"fbNub")+(' '+"_50-v")+(' '+"opened")+(' '+"_27_3")},c('React').createElement('div',{className:'fbNubFlyout fbDockChatTabFlyout uiContextualLayerParent'},c('React').createElement('div',{className:'fbNubFlyoutOuter'},c('React').createElement('div',{className:'fbNubFlyoutInner'},c('React').createElement('div',{className:"_5-kq"},c('React').createElement(c('XUISpinner.react'),null))))))));};f.exports=i;}),null);
__d('FantaTabsSlimApp',['Bootloader','BootloadOnRender.react','ChatPerfInstrumentation','FantaTabMainPlaceholder.react','FantaTabsAppBase','JSResource','LazyComponent.react','MercuryConfig','React','ReactDOM','ifRequired','setImmediate'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=void 0;h=babelHelpers.inherits(k,c('FantaTabsAppBase'));i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.$FantaTabsSlimApp1=false,this.$FantaTabsSlimApp3=function(q,r){if(this.$FantaTabsSlimApp1){c('ifRequired')('FantaMessageActions',function(s){s.receivedNewMessage(q,r);});}else this.$FantaTabsSlimApp2(function(){c('ifRequired')('FantaMessageActions',function(s){s.receivedNewMessage(q,r);});});}.bind(this),m;}k.prototype.getPumpedUp=function(l){if(this.$FantaTabsSlimApp1){l();}else this.$FantaTabsSlimApp2(l);};k.prototype.getViewComponent=function(){if(c('MercuryConfig').FantaTabView){return c('React').createElement(c('BootloadOnRender.react'),{component:c('React').createElement(c('LazyComponent.react'),{loadDataOnMount:false}),loader:c('JSResource')('FantaMercuryTabsWithMain.react').__setRef('FantaTabsSlimApp'),placeholder:c('React').createElement(c('FantaTabMainPlaceholder.react'),null)});}else return c('React').createElement(c('BootloadOnRender.react'),{component:c('React').createElement(c('LazyComponent.react'),{loadDataOnMount:false}),loader:c('JSResource')('FantaMercuryTabs.react').__setRef('FantaTabsSlimApp'),placeholder:c('React').createElement('div',null)});};k.prototype.initializeFantaData=function(l){e(['FantaCookieUtil','MercuryServerPayloadPreprocessor','MercuryThreadInformer','PresenceState'],function(m,n,o,p){p.registerStateLoader(function(q){var r,s=this;if(this.$FantaTabsSlimApp1){c('ifRequired')('FantaTabActions',function(t){c('ifRequired')('FantaAppStore',function(u){t.loadFromData(m.convertCookieData(q,u.getState().tabGroup));});});}else (function(){var t=m.convertCookieData(q);if(t.tabs.length>0)s.$FantaTabsSlimApp2(function(){c('ifRequired')('FantaTabActions',function(u){u.loadFromData(t);});});})();}.bind(this));p.doSync();n.get().handleUpdate(l);if(c('MercuryConfig').FantaTabView)o.get().subscribe('threads-updated',function(q,r){c('ifRequired')('FantaGetMessageActions',function(s){Object.keys(r).forEach(function(t){c('setImmediate')(function(){s.refreshThread(t);});});});});c('ChatPerfInstrumentation').logInitData();}.bind(this));};k.prototype.$FantaTabsSlimApp2=function(l){c('ifRequired')('FantaAppStore',function(m){l();},function(){c('Bootloader').loadModules(["FantaAppStore","FantaCookieUtil","FantaMessageActions","FantaTabActions","FantaTabViewportManager","PresenceState"],function(m,n,o,p,q,r){r.registerStateStorer(function(s){var t=m.getState().tabGroup;if(!j||j&&!j.equals(t)){j=t;return n.createCookieData(t,s);}else return s;});m.addListener(function(){return r.doSync();});c('ReactDOM').render(this.getViewComponent(),this.tabsElem);q.init(this.tabsElem);this.$FantaTabsSlimApp1=true;l();}.bind(this),'FantaTabsSlimApp');}.bind(this));};k.prototype.initializeFantaUI=function(){e(['FantaMercuryThreadEventsBootloaded','FantaMessageActions','FantaTabActions','FantaTabViewportManager','FBRTCMessageHandler','MercuryBrowserAlerts'],function(l,m,n,o,p,q){p.init();q.init();l.onMessagesReceived(this.$FantaTabsSlimApp3);c('ChatPerfInstrumentation').logInitUI();c('ChatPerfInstrumentation').logDisplayDone();}.bind(this));};f.exports=new k();}),null);
__d('MNCommerceDialogContainerMount',['MNCommerceDialogContainer.react','React','ReactDOM'],(function a(b,c,d,e,f,g){'use strict';var h={mount:function i(j){c('ReactDOM').render(c('React').createElement(c('MNCommerceDialogContainer.react'),null),j);}};f.exports=h;}),null);
__d('P2PDialogContainerMount',['P2PDialogContainer.react','React','ReactDOM'],(function a(b,c,d,e,f,g){'use strict';var h={mount:function i(j){c('ReactDOM').render(c('React').createElement(c('P2PDialogContainer.react'),null),j);}};f.exports=h;}),null);
__d('PagesPlatformDialogContainerMount',['PagesPlatformDialogContainer.react','React','ReactDOM'],(function a(b,c,d,e,f,g){'use strict';var h={mount:function i(j){c('ReactDOM').render(c('React').createElement(c('PagesPlatformDialogContainer.react'),null),j);}};f.exports=h;}),null);
__d('legacy:CompactTypeaheadRenderer',['CompactTypeaheadRenderer'],(function a(b,c,d,e,f,g){if(!b.TypeaheadRenderers)b.TypeaheadRenderers={};b.TypeaheadRenderers.compact=c('CompactTypeaheadRenderer');}),3);